import{d as I,r,o as j,c as n,a,b as p,n as x,t as d,F as y,f as g,j as h,e as A,l as f,v as D,p as U,q as O,i as o}from"./index-vmDhg5Vp.js";import{a as k,_ as z}from"./_plugin-vue_export-helper-C69HMVXR.js";const L={class:"editor"},R={class:"tabs"},H={key:0,class:"domains-list"},J={key:0,class:"loading"},K={key:1,class:"empty"},Q={key:2,class:"domain-grid"},W=["onClick"],X={class:"domain-header"},Y={class:"badge"},Z={class:"domain-fields"},ee={key:0,class:"more"},ae={key:1},te={key:0,class:"editing-banner"},le={class:"layout"},se={class:"form-panel"},ne={class:"form-group"},oe={class:"fields-section"},ie=["onUpdate:modelValue"],de=["onUpdate:modelValue"],ue=["value"],re=["value","onInput"],ve=["onClick","disabled"],ce={class:"options"},me={class:"form-group inline"},pe={"data-tooltip":"å¯ç”¨åå°†æ·»åŠ  DeletedAt å­—æ®µï¼Œåˆ é™¤æ—¶æ ‡è®°è€ŒéçœŸåˆ é™¤"},fe={class:"form-group inline"},be={"data-tooltip":"è‡ªåŠ¨åœ¨ main.go ä¸­æ³¨å†Œæ­¤æ¨¡å—"},_e={class:"form-group inline"},ye={"data-tooltip":"è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶"},ge={class:"advanced"},he={class:"form-group"},ke={class:"form-group"},we={key:0,class:"error"},Ce={class:"actions"},De=["disabled"],Ve=["disabled"],xe={key:0,class:"preview-panel"},Ue={class:"preview-header"},Fe={class:"file-list"},$e={class:"file-path"},Be={key:0,class:"message"},Ne=I({__name:"DomainEditor",setup(Se){const u=r(!1),c=r(null),m=r(""),_=r(!1),F=r([]),w=r([]),b=r("new"),V=r(!1),C=r(null),s=r({name:"",fields:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!0,force:!1});j(async()=>{try{const l=await k.getFieldTypes();F.value=l.types,await $()}catch(l){console.error(l)}});async function $(){V.value=!0;try{const l=await k.listDomains();w.value=l.domains}catch(l){console.error("Failed to load domains:",l)}finally{V.value=!1}}async function N(l){u.value=!0,m.value="";try{const e=await k.getDomainDetail(l),t=e.fields.map(v=>{let i=S(v.type);return{name:v.snake_name,type:i,enum_values:v.is_enum?[]:void 0}});s.value={name:e.name,fields:t.length>0?t:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!1,force:!0},C.value=l,b.value="new"}catch(e){m.value=`åŠ è½½å¤±è´¥: ${e.message}`}finally{u.value=!1}}function S(l){return l=l.replace("*",""),l==="string"?"string":l==="int"?"int":l==="int64"?"int64":l==="float64"?"float64":l==="bool"?"bool":l==="time.Time"?"time":l.includes("Time")?"time?":"enum"}function T(){s.value.fields.push({name:"",type:"string",enum_values:[]})}function E(l){s.value.fields.length>1&&s.value.fields.splice(l,1)}function G(l,e){l.enum_values=e.split("|").map(t=>t.trim()).filter(Boolean)}async function M(){m.value="",u.value=!0;try{const l=s.value.fields.filter(e=>e.name.trim());c.value=await k.previewDomain({...s.value,fields:l}),_.value=!0}catch(l){m.value=l.message}finally{u.value=!1}}async function P(){m.value="",u.value=!0;try{const l=s.value.fields.filter(e=>e.name.trim());c.value=await k.generateDomain({...s.value,fields:l}),_.value=!0,await $()}catch(l){m.value=l.message}finally{u.value=!1}}function B(){s.value={name:"",fields:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!0,force:!1},c.value=null,_.value=!1,C.value=null}function q(l){return{new:"æ–°å»º",overwrite:"è¦†ç›–",skip:"è·³è¿‡",error:"é”™è¯¯"}[l]||l}return(l,e)=>(o(),n("div",L,[e[21]||(e[21]=a("h1",null,"ğŸ“¦ ç”Ÿæˆé¢†åŸŸæ¨¡å— Domain",-1)),a("div",R,[a("button",{class:x(["tab",{active:b.value==="new"}]),onClick:e[0]||(e[0]=t=>b.value="new")}," âœ¨ æ–°å»ºæ¨¡å— ",2),a("button",{class:x(["tab",{active:b.value==="existing"}]),onClick:e[1]||(e[1]=t=>b.value="existing")}," ğŸ“‹ å·²ç”Ÿæˆæ¨¡å— ("+d(w.value.length)+") ",3)]),b.value==="existing"?(o(),n("div",H,[V.value?(o(),n("div",J,"åŠ è½½ä¸­...")):w.value.length===0?(o(),n("div",K,[...e[9]||(e[9]=[a("p",null,"æš‚æ— å·²ç”Ÿæˆçš„é¢†åŸŸæ¨¡å—",-1),a("p",{class:"hint"},'ç‚¹å‡»"æ–°å»ºæ¨¡å—"å¼€å§‹åˆ›å»º',-1)])])):(o(),n("div",Q,[(o(!0),n(y,null,g(w.value,t=>(o(),n("div",{key:t.name,class:"domain-card",onClick:v=>N(t.name)},[a("div",X,[a("h3",null,d(t.name),1),a("span",Y,d(t.fields.length)+" å­—æ®µ",1)]),a("div",Z,[(o(!0),n(y,null,g(t.fields.slice(0,5),(v,i)=>(o(),n("span",{key:i,class:"field-tag"},d(v),1))),128)),t.fields.length>5?(o(),n("span",ee,"+"+d(t.fields.length-5),1)):p("",!0)]),e[10]||(e[10]=a("div",{class:"domain-action"}," ç‚¹å‡»ç¼–è¾‘ â†’ ",-1))],8,W))),128))]))])):p("",!0),b.value==="new"?(o(),n("div",ae,[C.value?(o(),n("div",te,[e[11]||(e[11]=h(" âœï¸ æ­£åœ¨ç¼–è¾‘: ",-1)),a("strong",null,d(C.value),1),a("button",{class:"btn-small",onClick:B},"å–æ¶ˆç¼–è¾‘")])):p("",!0),a("div",le,[a("div",se,[e[20]||(e[20]=A('<details class="help-tips" data-v-b4a222a4><summary data-v-b4a222a4>ğŸ“– ä½¿ç”¨æŒ‡å— Usage Guide</summary><div class="tips-content" data-v-b4a222a4><p data-v-b4a222a4><strong data-v-b4a222a4>é¢†åŸŸåç§°ï¼š</strong>ä½¿ç”¨ PascalCase æ ¼å¼ï¼Œå¦‚ <code data-v-b4a222a4>User</code>ã€<code data-v-b4a222a4>Order</code></p><p data-v-b4a222a4><strong data-v-b4a222a4>å­—æ®µç±»å‹ï¼š</strong></p><ul data-v-b4a222a4><li data-v-b4a222a4><code data-v-b4a222a4>string</code> - å­—ç¬¦ä¸² (varchar 255)</li><li data-v-b4a222a4><code data-v-b4a222a4>text</code> - é•¿æ–‡æœ¬</li><li data-v-b4a222a4><code data-v-b4a222a4>int</code> / <code data-v-b4a222a4>int64</code> - æ•´æ•°</li><li data-v-b4a222a4><code data-v-b4a222a4>time</code> - æ—¶é—´æˆ³ï¼Œ<code data-v-b4a222a4>time?</code> - å¯é€‰æ—¶é—´</li><li data-v-b4a222a4><code data-v-b4a222a4>enum</code> - æšä¸¾ç±»å‹ï¼Œéœ€å¡«å†™æšä¸¾å€¼ï¼ˆç”¨ | åˆ†éš”ï¼‰</li></ul><p data-v-b4a222a4><strong data-v-b4a222a4>æç¤ºï¼š</strong>å‹¾é€‰&quot;è‡ªåŠ¨æ³¨å…¥åˆ° main.go&quot;å¯è‡ªåŠ¨å®Œæˆæ¨¡å—æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä»£ç </p></div></details>',1)),a("div",ne,[e[12]||(e[12]=a("label",null,[h(" é¢†åŸŸåç§° Domain Name * "),a("span",{class:"tooltip","data-tooltip":"å®ä½“åç§°ï¼Œå°†ç”Ÿæˆå¯¹åº”çš„ Go ç»“æ„ä½“"},"â“˜")],-1)),f(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.name=t),placeholder:"User / Order / Product"},null,512),[[D,s.value.name]])]),a("div",oe,[a("div",{class:"section-header"},[e[13]||(e[13]=a("h3",null,"å­—æ®µ Fields",-1)),a("button",{class:"btn-add",onClick:T},"+ æ·»åŠ å­—æ®µ")]),(o(!0),n(y,null,g(s.value.fields,(t,v)=>(o(),n("div",{class:"field-row",key:v},[f(a("input",{"onUpdate:modelValue":i=>t.name=i,placeholder:"username / email / status",class:"field-name"},null,8,ie),[[D,t.name]]),f(a("select",{"onUpdate:modelValue":i=>t.type=i,class:"field-type"},[(o(!0),n(y,null,g(F.value,i=>(o(),n("option",{key:i.type,value:i.type},d(i.type)+" - "+d(i.description),9,ue))),128))],8,de),[[O,t.type]]),t.type==="enum"?(o(),n("input",{key:0,value:t.enum_values?.join("|"),onInput:i=>G(t,i.target.value),placeholder:"active|inactive|banned",class:"field-enum","data-tooltip":"æšä¸¾å€¼ç”¨ | åˆ†éš”ï¼Œå¦‚ï¼šactive|inactive"},null,40,re)):p("",!0),a("button",{class:"btn-remove",onClick:i=>E(v),disabled:s.value.fields.length===1},"Ã—",8,ve)]))),128))]),a("div",ce,[a("div",me,[a("label",pe,[f(a("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=t=>s.value.soft_delete=t)},null,512),[[U,s.value.soft_delete]]),e[14]||(e[14]=h(" å¯ç”¨è½¯åˆ é™¤ Soft Delete ",-1))])]),a("div",fe,[a("label",be,[f(a("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>s.value.wire=t)},null,512),[[U,s.value.wire]]),e[15]||(e[15]=h(" è‡ªåŠ¨æ³¨å…¥åˆ° main.go ",-1))])]),a("div",_e,[a("label",ye,[f(a("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=t=>s.value.force=t)},null,512),[[U,s.value.force]]),e[16]||(e[16]=h(" å¼ºåˆ¶è¦†ç›– Force ",-1))])])]),a("details",ge,[e[19]||(e[19]=a("summary",null,"é«˜çº§é€‰é¡¹ Advanced",-1)),a("div",he,[e[17]||(e[17]=a("label",null,"è‡ªå®šä¹‰è¡¨å Table Name",-1)),f(a("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.table_name=t),placeholder:"ï¼ˆè‡ªåŠ¨ï¼šåç§°çš„å¤æ•°å½¢å¼ï¼‰"},null,512),[[D,s.value.table_name]])]),a("div",ke,[e[18]||(e[18]=a("label",null,"è‡ªå®šä¹‰è·¯ç”±å‰ç¼€ Route Base",-1)),f(a("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.route_base=t),placeholder:"ï¼ˆè‡ªåŠ¨ï¼šåç§°çš„å¤æ•°å½¢å¼ï¼‰"},null,512),[[D,s.value.route_base]])])]),m.value?(o(),n("div",we,d(m.value),1)):p("",!0),a("div",Ce,[a("button",{class:"btn",onClick:M,disabled:!s.value.name||u.value},d(u.value?"åŠ è½½ä¸­...":"é¢„è§ˆ Preview"),9,De),a("button",{class:"btn primary",onClick:P,disabled:!s.value.name||u.value},d(u.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,Ve)])]),_.value&&c.value?(o(),n("div",xe,[a("div",Ue,[a("h3",null,d(c.value.success?"âœ… å·²ç”Ÿæˆæ–‡ä»¶":"âŒ é”™è¯¯"),1),a("button",{class:"btn-close",onClick:e[8]||(e[8]=t=>_.value=!1)},"Ã—")]),a("div",Fe,[(o(!0),n(y,null,g(c.value.files,t=>(o(),n("div",{class:"file",key:t.path},[a("span",{class:x(["file-status",t.status])},d(q(t.status)),3),a("span",$e,d(t.path.split("/").pop()),1)]))),128))]),c.value.message?(o(),n("div",Be,d(c.value.message),1)):p("",!0),a("button",{class:"btn primary",onClick:B,style:{width:"100%","margin-top":"16px"}}," ç”Ÿæˆå¦ä¸€ä¸ª ")])):p("",!0)])])):p("",!0)]))}}),Ge=z(Ne,[["__scopeId","data-v-b4a222a4"]]);export{Ge as default};
