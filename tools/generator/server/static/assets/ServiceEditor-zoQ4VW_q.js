import{d as z,r as d,k as A,o as I,u as Q,c as o,a as e,b as u,n as k,t as n,l as x,v as N,F as P,f as T,j as m,e as H,p as J,i}from"./index-CDk2boWA.js";import{a as f,_ as K}from"./_plugin-vue_export-helper-BkqGbvhh.js";import{s as W}from"./toast-jWrsJuDh.js";const X={class:"editor"},Y={class:"tabs"},Z={key:0,class:"services-list"},ee={class:"search-box"},ae={key:0,class:"loading"},te={key:1,class:"empty"},se={key:2,class:"empty"},le={key:3,class:"service-grid"},oe=["onClick"],ie={class:"service-header"},ne={class:"header-actions"},de={class:"badge"},ve=["onClick"],ce={class:"service-methods"},ue={key:1},re={key:0,class:"editing-banner"},me={class:"layout"},pe={class:"form-panel"},he={class:"form-group"},_e={key:0,class:"detection-result"},ge={class:"detection-header"},fe={class:"detection-icon"},ye={class:"detection-content"},be={class:"detection-message"},ke={class:"detection-details"},we={class:"detail-item"},Se={class:"detail-item"},Ce={key:0,class:"detail-item highlight"},xe={class:"methods-section"},Pe=["onUpdate:modelValue"],Te=["onClick","disabled"],$e={class:"options"},Me={class:"form-group inline"},Ve={"data-tooltip":"è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶"},De={key:0,class:"force-warning"},Le={key:1,class:"error"},Ne={class:"actions"},Oe=["disabled"],Ue=["disabled"],Fe={key:0,class:"preview-panel"},Ge={class:"preview-header"},Re={class:"file-list"},Be={class:"file-path"},Ee={key:0,class:"message"},je=z({__name:"ServiceEditor",setup(qe){const v=d(!1),c=d(null),p=d(""),y=d(!1),b=d([]),_=d("new"),$=d(!1),w=d(null),h=d(""),g=d(null),S=d(!1),M=d(!1),l=d({name:"",methods:[""],force:!1}),V=A(()=>{if(!b.value||!h.value.trim())return b.value||[];const s=h.value.toLowerCase();return b.value.filter(a=>a.name.toLowerCase().includes(s)||a.methods.some(t=>t.toLowerCase().includes(s)))});I(async()=>{await D()});async function D(){$.value=!0;try{const s=await f.listServices();b.value=s.services}catch(s){console.error("Failed to load services:",s)}finally{$.value=!1}}async function U(s,a){if(a.stopPropagation(),!!confirm(`ç¡®å®šè¦åˆ é™¤åº”ç”¨æœåŠ¡ "${s}" å—ï¼Ÿ

è¿™å°†åˆ é™¤æœåŠ¡æ–‡ä»¶ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`))try{await f.deleteService(s),await D()}catch(t){alert(`åˆ é™¤å¤±è´¥: ${t.message}`)}}async function F(){if(!l.value.name||l.value.name.trim()===""){S.value=!1;return}try{const s=await f.detectServiceType(l.value.name);g.value=s,S.value=!0}catch(s){console.error("æ£€æµ‹å¤±è´¥:",s),S.value=!1}}let L=null;Q(()=>l.value.name,()=>{L&&clearTimeout(L),L=setTimeout(F,500)});async function G(s){v.value=!0,p.value="";try{const a=await f.getServiceDetail(s);l.value={name:a.name,methods:a.methods.map(t=>t.name),force:!0},w.value=s,_.value="new"}catch(a){p.value=`åŠ è½½å¤±è´¥: ${a.message}`}finally{v.value=!1}}function R(){l.value.methods.push("")}function B(s){l.value.methods.length>1&&l.value.methods.splice(s,1)}async function E(){p.value="",v.value=!0;try{const s=l.value.methods.filter(a=>a.trim());c.value=await f.previewService({...l.value,methods:s}),y.value=!0}catch(s){p.value=s.message}finally{v.value=!1}}async function j(){p.value="",v.value=!0;try{const s=l.value.methods.filter(a=>a.trim());c.value=await f.generateService({...l.value,methods:s}),y.value=!0,await D(),c.value.success&&W(c.value.message||"ç”ŸæˆæˆåŠŸï¼")}catch(s){p.value=s.message}finally{v.value=!1}}function O(){l.value={name:"",methods:[""],force:!1},c.value=null,y.value=!1,w.value=null}function q(s){return{new:"æ–°å»º",overwrite:"è¦†ç›–",skip:"è·³è¿‡",error:"é”™è¯¯"}[s]||s}return(s,a)=>(i(),o("div",X,[a[22]||(a[22]=e("h1",null,"âš™ï¸ ç”Ÿæˆåº”ç”¨æœåŠ¡ Service",-1)),e("div",Y,[e("button",{class:k(["tab",{active:_.value==="new"}]),onClick:a[0]||(a[0]=t=>_.value="new")}," âœ¨ æ–°å»ºæœåŠ¡ ",2),e("button",{class:k(["tab",{active:_.value==="existing"}]),onClick:a[1]||(a[1]=t=>_.value="existing")}," ğŸ“‹ å·²ç”ŸæˆæœåŠ¡ ("+n(b.value?.length||0)+") ",3)]),_.value==="existing"?(i(),o("div",Z,[e("div",ee,[x(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>h.value=t),type:"text",placeholder:"ğŸ” æœç´¢åº”ç”¨æœåŠ¡æˆ–æ–¹æ³•...",class:"search-input"},null,512),[[N,h.value]]),h.value?(i(),o("span",{key:0,class:"search-clear",onClick:a[3]||(a[3]=t=>h.value="")},"âœ•")):u("",!0)]),$.value?(i(),o("div",ae,"åŠ è½½ä¸­...")):V.value.length===0&&!h.value?(i(),o("div",te,[...a[8]||(a[8]=[e("p",null,"æš‚æ— å·²ç”Ÿæˆçš„åº”ç”¨æœåŠ¡",-1),e("p",{class:"hint"},'ç‚¹å‡»"æ–°å»ºæœåŠ¡"å¼€å§‹åˆ›å»º',-1)])])):V.value.length===0&&h.value?(i(),o("div",se,[...a[9]||(a[9]=[e("p",null,"æœªæ‰¾åˆ°åŒ¹é…çš„æœåŠ¡",-1),e("p",{class:"hint"},"å°è¯•å…¶ä»–å…³é”®è¯",-1)])])):(i(),o("div",le,[(i(!0),o(P,null,T(V.value,t=>(i(),o("div",{key:t.name,class:k(["service-card",{"domain-service":t.type==="domain_service","cross-domain-service":t.type==="cross_domain_service"}]),onClick:r=>G(t.name)},[e("div",ie,[e("h3",null,n(t.name),1),e("div",ne,[e("span",{class:k(["type-badge",t.type])},n(t.type==="domain_service"?"é¢†åŸŸ":"è·¨åŸŸ"),3),e("span",de,n(t.methods?.length||0)+" æ–¹æ³•",1),e("button",{class:"btn-delete",onClick:r=>U(t.name,r),title:"åˆ é™¤æœåŠ¡"}," ğŸ—‘ï¸ ",8,ve)])]),e("div",ce,[(i(!0),o(P,null,T(t.methods,(r,C)=>(i(),o("span",{key:C,class:"method-tag"},n(r),1))),128))]),a[10]||(a[10]=e("div",{class:"service-action"}," ç‚¹å‡»ç¼–è¾‘ â†’ ",-1))],10,oe))),128))]))])):u("",!0),_.value==="new"?(i(),o("div",ue,[w.value?(i(),o("div",re,[a[11]||(a[11]=m(" âœï¸ æ­£åœ¨ç¼–è¾‘: ",-1)),e("strong",null,n(w.value),1),e("button",{class:"btn-small",onClick:O},"å–æ¶ˆç¼–è¾‘")])):u("",!0),e("div",me,[e("div",pe,[a[20]||(a[20]=H('<details class="help-tips" data-v-a4806792><summary data-v-a4806792>ğŸ“– ä½¿ç”¨æŒ‡å— Usage Guide</summary><div class="tips-content" data-v-a4806792><div class="tip-section" data-v-a4806792><h4 data-v-a4806792>ğŸ¯ ä»€ä¹ˆæ˜¯åº”ç”¨æœåŠ¡ (Application Service)?</h4><p data-v-a4806792>åº”ç”¨æœåŠ¡æ˜¯ DDD æ¶æ„ä¸­çš„<strong data-v-a4806792>åº”ç”¨å±‚ç»„ä»¶</strong>ï¼Œè´Ÿè´£ï¼š</p><ul data-v-a4806792><li data-v-a4806792>ç¼–æ’å¤šä¸ªé¢†åŸŸæ¨¡å‹ä¹‹é—´çš„ä¸šåŠ¡é€»è¾‘</li><li data-v-a4806792>å¤„ç†è·¨é¢†åŸŸçš„å¤æ‚æ“ä½œï¼ˆå¦‚ï¼šæ”¯ä»˜æ—¶æ›´æ–°è®¢å•çŠ¶æ€+æ‰£å‡åº“å­˜+å‘é€é€šçŸ¥ï¼‰</li><li data-v-a4806792>ä½œä¸ºé¢†åŸŸå±‚å’Œæ¥å£å±‚ä¹‹é—´çš„æ¡¥æ¢</li></ul></div><div class="tip-section" data-v-a4806792><h4 data-v-a4806792>ğŸ“ æœåŠ¡åç§°è§„åˆ™</h4><ul data-v-a4806792><li data-v-a4806792>ä½¿ç”¨ <strong data-v-a4806792>PascalCase</strong> æ ¼å¼</li><li data-v-a4806792>å»ºè®®ä»¥ <code data-v-a4806792>Service</code> ç»“å°¾ï¼ˆä¸å¡«ä¼šè‡ªåŠ¨æ·»åŠ ï¼‰</li><li data-v-a4806792>ç¤ºä¾‹ï¼š<code data-v-a4806792>PaymentService</code>ã€<code data-v-a4806792>OrderProcessService</code>ã€<code data-v-a4806792>NotificationService</code></li></ul></div><div class="tip-section" data-v-a4806792><h4 data-v-a4806792>âš™ï¸ ä¸¤ç§æœåŠ¡ç±»å‹</h4><ul data-v-a4806792><li data-v-a4806792><span class="type-hint domain" data-v-a4806792>é¢†åŸŸæœåŠ¡</span> - ä¸å·²æœ‰é¢†åŸŸåŒåæ—¶ï¼Œç”Ÿæˆåœ¨ <code data-v-a4806792>application/{domain}/service.go</code></li><li data-v-a4806792><span class="type-hint cross" data-v-a4806792>è·¨åŸŸæœåŠ¡</span> - æ— å¯¹åº”é¢†åŸŸæ—¶ï¼Œç”Ÿæˆåœ¨ç‹¬ç«‹ç›®å½• <code data-v-a4806792>application/{service}/</code></li></ul></div><div class="tip-section" data-v-a4806792><h4 data-v-a4806792>ğŸ“‹ æ–¹æ³•å®šä¹‰</h4><ul data-v-a4806792><li data-v-a4806792>æ¯è¡Œè¾“å…¥ä¸€ä¸ªæ–¹æ³•åï¼Œä½¿ç”¨ PascalCase</li><li data-v-a4806792>ç¤ºä¾‹ï¼š<code data-v-a4806792>ProcessPayment</code>ã€<code data-v-a4806792>RefundOrder</code>ã€<code data-v-a4806792>SendNotification</code></li><li data-v-a4806792><strong data-v-a4806792>ç•™ç©º</strong>å°†è‡ªåŠ¨ç”Ÿæˆï¼šCreateã€Getã€List ä¸‰ä¸ªåŸºç¡€æ–¹æ³•</li></ul></div><div class="tip-section" data-v-a4806792><h4 data-v-a4806792>ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶</h4><ul data-v-a4806792><li data-v-a4806792><code data-v-a4806792>service.go</code> - æœåŠ¡ä¸»ä½“ï¼ŒåŒ…å«æ–¹æ³•ç­¾åå’Œæ¡©ä»£ç </li><li data-v-a4806792><code data-v-a4806792>service_dto.go</code> - è¯·æ±‚/å“åº”çš„æ•°æ®ä¼ è¾“å¯¹è±¡</li><li data-v-a4806792><code data-v-a4806792>module.go</code> - Fx ä¾èµ–æ³¨å…¥æ¨¡å—</li></ul></div><div class="tip-section warning" data-v-a4806792><h4 data-v-a4806792>âš ï¸ æ³¨æ„äº‹é¡¹</h4><ul data-v-a4806792><li data-v-a4806792>ç”Ÿæˆåéœ€è¦åœ¨ <code data-v-a4806792>service.go</code> ä¸­æ³¨å…¥æ‰€éœ€çš„ Repository</li><li data-v-a4806792>æ–¹æ³•ä½“ä¸ºç©ºå®ç°ï¼Œéœ€æ‰‹åŠ¨å¡«å……ä¸šåŠ¡é€»è¾‘</li><li data-v-a4806792>ä½¿ç”¨<strong data-v-a4806792>å¼ºåˆ¶è¦†ç›–</strong>ä¼šä¸¢å¤±å·²æœ‰ä»£ç ï¼ä»…åœ¨é¦–æ¬¡ç”Ÿæˆæˆ–é‡ç½®æ—¶ä½¿ç”¨</li></ul></div></div></details>',1)),e("div",he,[a[12]||(a[12]=e("label",null,[m(" æœåŠ¡åç§° Service Name * "),e("span",{class:"tooltip","data-tooltip":"åº”ç”¨æœåŠ¡åç§°ï¼Œç”¨äºè·¨é¢†åŸŸä¸šåŠ¡é€»è¾‘"},"â“˜")],-1)),x(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.name=t),placeholder:"OrderService / PaymentService"},null,512),[[N,l.value.name]]),a[13]||(a[13]=e("span",{class:"hint"},'å¦‚æœæœªåŒ…å« "Service" åç¼€ä¼šè‡ªåŠ¨æ·»åŠ ',-1))]),S.value&&g.value?(i(),o("div",_e,[e("div",ge,[e("div",fe,n(g.value.domain_exists?"âœ…":"â„¹ï¸"),1),e("div",ye,[e("p",be,n(g.value.message),1),e("div",ke,[e("span",we,[a[14]||(a[14]=e("strong",null,"ç±»å‹:",-1)),m(" "+n(g.value.service_type==="domain_service"?"é¢†åŸŸæœåŠ¡":"è·¨é¢†åŸŸæœåŠ¡"),1)]),e("span",Se,[a[15]||(a[15]=e("strong",null,"ç›®æ ‡:",-1)),m(" "+n(g.value.target_dir),1)]),g.value.should_reuse_dto?(i(),o("span",Ce," âœ… å¤ç”¨ç°æœ‰ DTO ")):u("",!0)])]),e("button",{class:"btn-toggle-manual",onClick:a[5]||(a[5]=t=>M.value=!M.value),type:"button"},n(M.value?"ğŸ”„ è‡ªåŠ¨":"âš™ï¸ æ‰‹åŠ¨"),1)])])):u("",!0),e("div",xe,[e("div",{class:"section-header"},[a[16]||(a[16]=e("h3",null,"æ–¹æ³• Methods",-1)),e("button",{class:"btn-add",onClick:R},"+ æ·»åŠ æ–¹æ³•")]),(i(!0),o(P,null,T(l.value.methods,(t,r)=>(i(),o("div",{class:"method-row",key:r},[x(e("input",{"onUpdate:modelValue":C=>l.value.methods[r]=C,placeholder:"CreateOrder / ProcessPayment / CancelOrder",class:"method-name"},null,8,Pe),[[N,l.value.methods[r]]]),e("button",{class:"btn-remove",onClick:C=>B(r),disabled:l.value.methods.length===1},"Ã—",8,Te)]))),128)),a[17]||(a[17]=e("p",{class:"hint"},"ç•™ç©ºå°†ç”Ÿæˆé»˜è®¤æ–¹æ³•ï¼šCreateã€Getã€List",-1))]),e("div",$e,[e("div",Me,[e("label",Ve,[x(e("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=t=>l.value.force=t)},null,512),[[J,l.value.force]]),a[18]||(a[18]=m(" å¼ºåˆ¶è¦†ç›– Force ",-1))]),l.value.force?(i(),o("div",De,[...a[19]||(a[19]=[m(" âš ï¸ ",-1),e("strong",null,"è­¦å‘Šï¼š",-1),m("å¼ºåˆ¶è¦†ç›–å°†",-1),e("strong",null,"æ°¸ä¹…åˆ é™¤",-1),m("æ‰€æœ‰æ‰‹åŠ¨ä¿®æ”¹çš„ä»£ç ï¼",-1),e("br",null,null,-1),m(" åªåœ¨é¦–æ¬¡ç”Ÿæˆåç«‹å³ä¿®æ”¹æ—¶ä½¿ç”¨ã€‚ä¸€æ—¦å¼€å§‹å†™ä¸šåŠ¡é€»è¾‘ï¼Œè¯·å‹¿å‹¾é€‰æ­¤é€‰é¡¹ã€‚ ",-1)])])):u("",!0)])]),p.value?(i(),o("div",Le,n(p.value),1)):u("",!0),e("div",Ne,[e("button",{class:"btn",onClick:E,disabled:!l.value.name||v.value},n(v.value?"åŠ è½½ä¸­...":"é¢„è§ˆ Preview"),9,Oe),e("button",{class:"btn primary",onClick:j,disabled:!l.value.name||v.value},n(v.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,Ue)])]),y.value&&c.value?(i(),o("div",Fe,[e("div",Ge,[e("h3",null,n(c.value.success?"âœ… å·²ç”Ÿæˆæ–‡ä»¶":"âŒ é”™è¯¯"),1),e("button",{class:"btn-close",onClick:a[7]||(a[7]=t=>y.value=!1)},"Ã—")]),e("div",Re,[(i(!0),o(P,null,T(c.value.files,t=>(i(),o("div",{class:"file",key:t.path},[e("span",{class:k(["file-status",t.status])},n(q(t.status)),3),e("span",Be,n(t.path.split("/").pop()),1)]))),128))]),c.value.message?(i(),o("div",Ee,n(c.value.message),1)):u("",!0),a[21]||(a[21]=e("div",{class:"next-steps"},[e("h4",null,"ä¸‹ä¸€æ­¥ Next Steps:"),e("ol",null,[e("li",null,"åœ¨æœåŠ¡ç»“æ„ä½“ä¸­æ³¨å…¥æ‰€éœ€çš„ Repository"),e("li",null,"åœ¨æ¯ä¸ªæ–¹æ³•ä¸­å®ç°ä¸šåŠ¡é€»è¾‘"),e("li",null,"åœ¨ main.go ä¸­æ³¨å†ŒæœåŠ¡")])],-1)),e("button",{class:"btn primary",onClick:O,style:{width:"100%","margin-top":"16px"}}," ç”Ÿæˆå¦ä¸€ä¸ª ")])):u("",!0)])])):u("",!0)]))}}),Qe=K(je,[["__scopeId","data-v-a4806792"]]);export{Qe as default};
