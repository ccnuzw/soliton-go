import{d as tt,r as d,k as at,o as lt,u as nt,c as u,e as st,a as t,b as j,j as N,l as v,v as _,F as C,f as O,s as J,t as c,p as G,n as ne,i as r}from"./index-B6d2u8uR.js";import{a as b,_ as it}from"./_plugin-vue_export-helper-C3QuQZpn.js";import{a as o,s as k}from"./toast-ijgLvE2V.js";const ot={class:"editor"},ut={class:"domain-select"},rt={class:"domain-input"},ct={id:"domain-list"},dt=["value"],vt=["value"],ft=["disabled"],pt={class:"hint"},mt={class:"grid"},gt={class:"card"},bt={class:"existing"},yt={class:"existing-row"},ht=["value"],_t={class:"existing-actions"},wt=["disabled"],kt=["disabled"],Vt=["disabled"],Et={class:"form-group"},St={class:"fields-section"},Dt={class:"section-header"},Ft=["onUpdate:modelValue"],xt=["onUpdate:modelValue"],Ct=["value"],Ot=["value","onInput"],Ut=["onUpdate:modelValue"],jt=["onClick","disabled"],Ht={class:"batch-import"},Pt={class:"checkbox"},$t={class:"actions"},Bt=["disabled"],Tt=["disabled"],Nt=["disabled"],Jt={key:0,class:"result"},At={class:"result-header"},Lt={class:"file-list"},It={class:"file-path"},Rt={class:"card"},Mt={class:"existing"},Gt={class:"existing-row"},zt=["value"],Wt={class:"existing-actions"},qt=["disabled"],Kt=["disabled"],Qt=["disabled"],Xt={class:"form-group"},Yt={class:"form-group"},Zt=["placeholder"],ea={class:"checkbox"},ta={class:"batch-import"},aa={class:"actions"},la=["disabled"],na=["disabled"],sa=["disabled"],ia={key:0,class:"result"},oa={class:"result-header"},ua={class:"file-list"},ra={class:"file-path"},ca={class:"card"},da={class:"existing"},va={class:"existing-row"},fa=["value"],pa={class:"existing-actions"},ma=["disabled"],ga=["disabled"],ba=["disabled"],ya={class:"form-group"},ha={class:"form-group"},_a=["placeholder"],wa={class:"checkbox"},ka={class:"batch-import"},Va={class:"actions"},Ea=["disabled"],Sa=["disabled"],Da=["disabled"],Fa={key:0,class:"result"},xa={class:"result-header"},Ca={class:"file-list"},Oa={class:"file-path"},Ua={class:"card full"},ja={class:"existing"},Ha={class:"existing-row"},Pa=["value"],$a={class:"existing-actions"},Ba=["disabled"],Ta=["disabled"],Na=["disabled"],Ja={class:"existing"},Aa={class:"existing-row"},La=["value"],Ia={class:"existing-actions"},Ra=["disabled"],Ma=["disabled"],Ga=["disabled"],za={class:"form-group"},Wa={class:"form-group"},qa={key:0,class:"fields-section"},Ka={class:"section-header"},Qa=["onUpdate:modelValue"],Xa=["onUpdate:modelValue"],Ya=["value"],Za=["value","onInput"],el=["onUpdate:modelValue"],tl=["onClick","disabled"],al={class:"options-grid"},ll={class:"checkbox"},nl={class:"checkbox"},sl={class:"checkbox"},il={class:"checkbox"},ol={key:1,class:"form-group"},ul={class:"batch-import"},rl={class:"actions"},cl=["disabled"],dl=["disabled"],vl=["disabled"],fl=["disabled"],pl={key:2,class:"result"},ml={class:"result-header"},gl={class:"file-list"},bl={class:"file-path"},yl={key:0,class:"message"},hl={key:0,class:"diff-modal"},_l={class:"diff-panel"},wl={class:"diff-header"},kl={class:"diff-title"},Vl={class:"diff-meta"},El={key:0},Sl={key:1},Dl={key:2},Fl={class:"diff-body"},xl={class:"diff-column"},Cl={class:"diff-column"},Ol=tt({__name:"DddEditor",setup(Ul){const Z=d(!1),A=d([]),U=d(""),se=d([]),L=d(null),f=d(!1),V=d(""),E=d(""),S=d(""),D=d(""),F=d(""),ie=d(!1),de=d(""),ve=d(""),fe=d(""),oe=d(""),ue=d(""),re=d(""),h=d(!1),ee=d(""),te=d(""),ae=d(""),le=d(""),P=d(!1),I=d(null),$=d(!1),R=d(null),B=d(!1),M=d(null),H=d(!1),T=d(null),p=d({name:"",fields:[{name:"value",type:"string",comment:"",enum_values:[]}],force:!1}),m=d({name:"",target:"",force:!1}),g=d({name:"",target:"",force:!1}),n=d({name:"",topic:"",fields:[{name:"user_id",type:"uuid",comment:"",enum_values:[]}],generateEvent:!0,generateHandler:!0,handlerTopic:"",eventForce:!1,handlerForce:!1}),De=at(()=>{if(!U.value.trim())return"è¯·é€‰æ‹©æˆ–è¾“å…¥å·²æœ‰é¢†åŸŸåç§°";const l=U.value.trim().toLowerCase(),e=A.value.some(a=>a.toLowerCase()===l);return A.value.length>0&&!e?"æœªåœ¨é¡¹ç›®ä¸­æ‰¾åˆ°è¯¥é¢†åŸŸï¼Œè¯·å…ˆç”Ÿæˆé¢†åŸŸæ¨¡å—":"å¯é€‰é¢†åŸŸæ¥è‡ªå·²ç”Ÿæˆæ¨¡å—"});lt(async()=>{try{const l=await b.getFieldTypes();se.value=l.types,await pe(),await z()}catch(l){console.error(l)}}),nt(U,async()=>{V.value="",E.value="",S.value="",D.value="",F.value="",await z()});async function pe(){Z.value=!0;try{const l=await b.listDomains();if(A.value=l.domains.map(e=>e.name),!U.value&&A.value.length>0){const e=A.value[0];e&&(U.value=e)}}catch(l){console.error("Failed to load domains:",l)}finally{Z.value=!1}}async function z(){const l=U.value.trim();if(!l){L.value=null;return}f.value=!0;try{L.value=await b.listDddComponents(l)}catch(e){console.error("Failed to load DDD list:",e)}finally{f.value=!1}}function y(){const l=U.value.trim();return l||(o("è¯·å…ˆé€‰æ‹©é¢†åŸŸ"),null)}function me(l){l.push({name:"",type:"string",comment:"",enum_values:[]})}function ge(l,e){l.length>1&&l.splice(e,1)}function be(l,e){l.enum_values=e.split("|").map(a=>a.trim()).filter(Boolean)}function W(l){return{new:"æ–°å»º",overwrite:"è¦†ç›–",skip:"è·³è¿‡",error:"é”™è¯¯"}[l]||l}function ye(){ie.value=!1}function q(l,e,a,i,s,w=""){de.value=l,ve.value=e,fe.value=a,oe.value=i,re.value=s,ue.value=w,ie.value=!0}function he(l){if(!l)return null;if(typeof l=="string")return _e(l);if(typeof l!="object"||!l.name||!l.type)return null;const e=Array.isArray(l.enum_values)?l.enum_values:Array.isArray(l.enumValues)?l.enumValues:[];return{name:String(l.name),type:String(l.type),comment:l.comment?String(l.comment):"",enum_values:e}}function _e(l){const e=l.trim();if(!e)return null;let a="",i="",s="";if(e.includes(",")){const x=e.split(",");a=(x[0]||"").trim(),i=(x[1]||"").trim(),s=x.slice(2).join(",").trim()}else if(e.includes("	")){const x=e.split("	");a=(x[0]||"").trim(),i=(x[1]||"").trim(),s=x.slice(2).join(" ").trim()}else{const x=e.match(/^(\S+)\s+(\S+)\s*(.*)$/);if(!x)return null;a=x[1]||"",i=x[2]||"",s=x[3]||""}if(!a||!i)return null;let w=[];return i.startsWith("enum:")&&(w=i.slice(5).split("|").map(x=>x.trim()).filter(Boolean),i="enum"),{name:a,type:i,comment:s||"",enum_values:w}}function ce(l){return l.map(e=>({name:e.name||"",type:e.type||"string",comment:e.comment||"",enum_values:e.enum_values?[...e.enum_values]:[]}))}function we(l,e){return!l||l.length===0?e:ce(l)}function ke(l){const e=l.trim();if(!e)return null;try{const i=JSON.parse(e);if(Array.isArray(i)){const s=i.map(he).filter(Boolean);return s.length?{fields:s}:null}if(i&&typeof i=="object"){const w=(Array.isArray(i.fields)?i.fields:[]).map(he).filter(Boolean);return{name:i.name||i.event_name,topic:i.topic,handlerTopic:i.handler_topic||i.handlerTopic,generateEvent:i.generateEvent,generateHandler:i.generateHandler,eventForce:i.eventForce,handlerForce:i.handlerForce,fields:w}}}catch{}const a=e.split(/\r?\n/).map(_e).filter(Boolean);return a.length?{fields:a}:null}function Ve(l){const e=l.trim();if(!e)return null;try{const s=JSON.parse(e);if(s&&typeof s=="object")return{name:s.name,target:s.target,force:s.force}}catch{}const a=e.split(/\r?\n/).find(s=>s.trim());if(!a)return null;if(a.includes(",")){const s=a.split(",");return{name:(s[0]||"").trim(),target:(s[1]||"").trim()}}const i=a.match(/^(\S+)\s+(\S+)\s*$/);return i?{name:i[1]||"",target:i[2]||""}:{name:a.trim(),target:""}}function Fe(){const l=ke(ee.value);if(!l){o("è¯·è¾“å…¥æœ‰æ•ˆçš„å­—æ®µ JSON æˆ–è¡Œåˆ—è¡¨");return}l.name&&(p.value.name=String(l.name)),l.fields?.length&&(p.value.fields=ce(l.fields)),k("å·²å¯¼å…¥å­—æ®µ")}function xe(){ee.value=JSON.stringify({name:p.value.name,fields:p.value.fields},null,2)}function Ce(){const l=Ve(te.value);if(!l){o("è¯·è¾“å…¥æœ‰æ•ˆçš„ JSON æˆ– Name,Target");return}l.name&&(m.value.name=String(l.name)),l.target!==void 0&&(m.value.target=l.target||""),typeof l.force=="boolean"&&(m.value.force=l.force),k("å·²å¯¼å…¥ Specification é…ç½®")}function Oe(){te.value=JSON.stringify({name:m.value.name,target:m.value.target,force:m.value.force},null,2)}function Ue(){const l=Ve(ae.value);if(!l){o("è¯·è¾“å…¥æœ‰æ•ˆçš„ JSON æˆ– Name,Target");return}l.name&&(g.value.name=String(l.name)),l.target!==void 0&&(g.value.target=l.target||""),typeof l.force=="boolean"&&(g.value.force=l.force),k("å·²å¯¼å…¥ Policy é…ç½®")}function je(){ae.value=JSON.stringify({name:g.value.name,target:g.value.target,force:g.value.force},null,2)}function He(){const l=ke(le.value);if(!l){o("è¯·è¾“å…¥æœ‰æ•ˆçš„å­—æ®µ JSON æˆ–è¡Œåˆ—è¡¨");return}l.name&&(n.value.name=String(l.name)),l.topic!==void 0&&(n.value.topic=l.topic||""),l.handlerTopic!==void 0&&(n.value.handlerTopic=l.handlerTopic||""),typeof l.generateEvent=="boolean"&&(n.value.generateEvent=l.generateEvent),typeof l.generateHandler=="boolean"&&(n.value.generateHandler=l.generateHandler),typeof l.eventForce=="boolean"&&(n.value.eventForce=l.eventForce),typeof l.handlerForce=="boolean"&&(n.value.handlerForce=l.handlerForce),l.fields?.length&&(n.value.fields=ce(l.fields),n.value.generateEvent=!0),k("å·²å¯¼å…¥ Event é…ç½®")}function Pe(){le.value=JSON.stringify({name:n.value.name,topic:n.value.topic,handler_topic:n.value.handlerTopic,generateEvent:n.value.generateEvent,generateHandler:n.value.generateHandler,eventForce:n.value.eventForce,handlerForce:n.value.handlerForce,fields:n.value.fields},null,2)}function Ee(l,e,a){l==="valueobject"&&(V.value===e&&(V.value=a),p.value.name===e&&(p.value.name=a)),l==="spec"&&(E.value===e&&(E.value=a),m.value.name===e&&(m.value.name=a)),l==="policy"&&(S.value===e&&(S.value=a),g.value.name===e&&(g.value.name=a)),l==="event"&&(D.value===e&&(D.value=a),n.value.name===e&&(n.value.name=a)),l==="event_handler"&&(F.value===e&&(F.value=a),n.value.name===e&&(n.value.name=a))}function $e(l,e){l==="valueobject"&&V.value===e&&(V.value=""),l==="spec"&&E.value===e&&(E.value=""),l==="policy"&&S.value===e&&(S.value=""),l==="event"&&D.value===e&&(D.value=""),l==="event_handler"&&F.value===e&&(F.value="")}async function K(l,e,a){const i=y();if(!i)return;if(!e){o(`è¯·é€‰æ‹©éœ€è¦é‡å‘½åçš„ ${a}`);return}const s=window.prompt(`è¯·è¾“å…¥æ–°çš„ ${a} åç§°`,e);if(!(!s||!s.trim())){if(s.trim()===e){o("æ–°åç§°ä¸åŸåç§°ä¸€è‡´");return}f.value=!0;try{await b.renameDddItem({domain:i,type:l,name:e,new_name:s.trim(),force:!1}),Ee(l,e,s.trim()),await z(),k(`${a} å·²é‡å‘½å`)}catch(w){if(w?.message&&w.message.includes("target file exists")){if(!window.confirm("ç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ"))return;try{await b.renameDddItem({domain:i,type:l,name:e,new_name:s.trim(),force:!0}),Ee(l,e,s.trim()),await z(),k(`${a} å·²è¦†ç›–é‡å‘½å`)}catch(et){o(et?.message||"é‡å‘½åå¤±è´¥")}}else o(w?.message||"é‡å‘½åå¤±è´¥")}finally{f.value=!1}}}async function Q(l,e,a){const i=y();if(!i)return;if(!e){o(`è¯·é€‰æ‹©éœ€è¦åˆ é™¤çš„ ${a}`);return}if(window.confirm(`ç¡®è®¤åˆ é™¤ ${a} ${e} å—ï¼Ÿ`)){f.value=!0;try{await b.deleteDddItem({domain:i,type:l,name:e}),$e(l,e),await z(),k(`${a} å·²åˆ é™¤`)}catch(w){o(w?.message||"åˆ é™¤å¤±è´¥")}finally{f.value=!1}}}async function X(l,e,a){try{const i=await b.getDddSource(l,e,a);return{content:i.content,file:i.file,found:!0}}catch{return{content:"",file:"",found:!1}}}function Y(l){const e=l.files.find(a=>a.content)||l.files[0];if(!e||!e.content)throw new Error("é¢„è§ˆå†…å®¹ä¸ºç©º");return{content:e.content,file:e.path.split("/").pop()||e.path,status:e.status}}async function Be(){const l=y();if(l){if(!p.value.name.trim()){o("è¯·è¾“å…¥ Value Object åç§°");return}h.value=!0;try{const e=p.value.fields.filter(w=>w.name.trim()),a=await b.previewValueObject({domain:l,name:p.value.name,fields:e,force:p.value.force}),i=Y(a),s=await X(l,"valueobject",p.value.name);q(`Value Object Â· ${p.value.name}`,s.content,i.content,i.file,i.status,s.found?"":"å½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ–‡ä»¶")}catch(e){o(e?.message||"å¯¹æ¯”å¤±è´¥")}finally{h.value=!1}}}async function Te(){const l=y();if(l){if(!m.value.name.trim()){o("è¯·è¾“å…¥ Specification åç§°");return}h.value=!0;try{const e=await b.previewSpecification({domain:l,name:m.value.name,target:m.value.target.trim(),force:m.value.force}),a=Y(e),i=await X(l,"spec",m.value.name);q(`Specification Â· ${m.value.name}`,i.content,a.content,a.file,a.status,i.found?"":"å½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ–‡ä»¶")}catch(e){o(e?.message||"å¯¹æ¯”å¤±è´¥")}finally{h.value=!1}}}async function Ne(){const l=y();if(l){if(!g.value.name.trim()){o("è¯·è¾“å…¥ Policy åç§°");return}h.value=!0;try{const e=await b.previewPolicy({domain:l,name:g.value.name,target:g.value.target.trim(),force:g.value.force}),a=Y(e),i=await X(l,"policy",g.value.name);q(`Policy Â· ${g.value.name}`,i.content,a.content,a.file,a.status,i.found?"":"å½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ–‡ä»¶")}catch(e){o(e?.message||"å¯¹æ¯”å¤±è´¥")}finally{h.value=!1}}}async function Je(){const l=y();if(l){if(!n.value.name.trim()){o("è¯·è¾“å…¥ Event åç§°");return}if(!n.value.generateEvent){o("è¯·å‹¾é€‰ç”Ÿæˆ Event åå†å¯¹æ¯”");return}h.value=!0;try{const e=n.value.fields.filter(w=>w.name.trim()),a=await b.previewEvent({domain:l,name:n.value.name,fields:e,topic:n.value.topic.trim(),force:n.value.eventForce}),i=Y(a),s=await X(l,"event",n.value.name);q(`Event Â· ${n.value.name}`,s.content,i.content,i.file,i.status,s.found?"":"å½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ–‡ä»¶")}catch(e){o(e?.message||"å¯¹æ¯”å¤±è´¥")}finally{h.value=!1}}}async function Ae(){const l=y();if(l){if(!n.value.name.trim()){o("è¯·è¾“å…¥ Event åç§°");return}if(!n.value.generateHandler){o("è¯·å‹¾é€‰ç”Ÿæˆ Handler åå†å¯¹æ¯”");return}h.value=!0;try{const e=await b.previewEventHandler({domain:l,event_name:n.value.name,topic:(n.value.handlerTopic||n.value.topic).trim(),force:n.value.handlerForce}),a=Y(e),i=await X(l,"event_handler",n.value.name);q(`Handler Â· ${n.value.name}`,i.content,a.content,a.file,a.status,i.found?"":"å½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°†åˆ›å»ºæ–°æ–‡ä»¶")}catch(e){o(e?.message||"å¯¹æ¯”å¤±è´¥")}finally{h.value=!1}}}function Se(l){const e={success:!0,files:[]},a=[],i=[];return l.forEach(s=>{e.success=e.success&&s.success,e.files.push(...s.files),s.message&&a.push(s.message),s.errors&&s.errors.length>0&&i.push(...s.errors)}),a.length>0&&(e.message=a.join(" / ")),i.length>0&&(e.errors=i),e}async function Le(){const l=y();if(l){if(!V.value){o("è¯·é€‰æ‹© Value Object");return}f.value=!0;try{const e=await b.getDddDetail(l,"valueobject",V.value);p.value.name=e.name||V.value,p.value.fields=we(e.fields,[{name:"value",type:"string",comment:"",enum_values:[]}]),p.value.force=!0,k("å·²åŠ è½½ Value Object")}catch(e){o(e.message||"åŠ è½½å¤±è´¥")}finally{f.value=!1}}}async function Ie(){const l=y();if(l){if(!E.value){o("è¯·é€‰æ‹© Specification");return}f.value=!0;try{const e=await b.getDddDetail(l,"spec",E.value);m.value.name=e.name||E.value,m.value.target=e.target||"",m.value.force=!0,k("å·²åŠ è½½ Specification")}catch(e){o(e.message||"åŠ è½½å¤±è´¥")}finally{f.value=!1}}}async function Re(){const l=y();if(l){if(!S.value){o("è¯·é€‰æ‹© Policy");return}f.value=!0;try{const e=await b.getDddDetail(l,"policy",S.value);g.value.name=e.name||S.value,g.value.target=e.target||"",g.value.force=!0,k("å·²åŠ è½½ Policy")}catch(e){o(e.message||"åŠ è½½å¤±è´¥")}finally{f.value=!1}}}async function Me(){const l=y();if(l){if(!D.value){o("è¯·é€‰æ‹© Event");return}f.value=!0;try{const e=await b.getDddDetail(l,"event",D.value);n.value.name=e.name||D.value,n.value.topic=e.topic||"",n.value.fields=we(e.fields,[{name:"user_id",type:"uuid",comment:"",enum_values:[]}]),n.value.generateEvent=!0,n.value.generateHandler=!1,n.value.eventForce=!0,k("å·²åŠ è½½ Event")}catch(e){o(e.message||"åŠ è½½å¤±è´¥")}finally{f.value=!1}}}async function Ge(){const l=y();if(l){if(!F.value){o("è¯·é€‰æ‹© Handler");return}f.value=!0;try{const e=await b.getDddDetail(l,"event_handler",F.value);n.value.name=e.event_name||F.value,n.value.handlerTopic=e.topic||"",n.value.generateEvent=!1,n.value.generateHandler=!0,n.value.handlerForce=!0,k("å·²åŠ è½½ Handler")}catch(e){o(e.message||"åŠ è½½å¤±è´¥")}finally{f.value=!1}}}async function ze(){const l=y();if(l){if(!p.value.name.trim()){o("è¯·è¾“å…¥ Value Object åç§°");return}P.value=!0;try{const e=p.value.fields.filter(a=>a.name.trim());I.value=await b.previewValueObject({domain:l,name:p.value.name,fields:e,force:p.value.force})}catch(e){o(e.message)}finally{P.value=!1}}}async function We(){const l=y();if(l){if(!p.value.name.trim()){o("è¯·è¾“å…¥ Value Object åç§°");return}P.value=!0;try{const e=p.value.fields.filter(a=>a.name.trim());I.value=await b.generateValueObject({domain:l,name:p.value.name,fields:e,force:p.value.force}),I.value.success&&k(I.value.message||"Value Object ç”ŸæˆæˆåŠŸ")}catch(e){o(e.message)}finally{P.value=!1}}}async function qe(){const l=y();if(l){if(!m.value.name.trim()){o("è¯·è¾“å…¥ Specification åç§°");return}$.value=!0;try{R.value=await b.previewSpecification({domain:l,name:m.value.name,target:m.value.target.trim(),force:m.value.force})}catch(e){o(e.message)}finally{$.value=!1}}}async function Ke(){const l=y();if(l){if(!m.value.name.trim()){o("è¯·è¾“å…¥ Specification åç§°");return}$.value=!0;try{R.value=await b.generateSpecification({domain:l,name:m.value.name,target:m.value.target.trim(),force:m.value.force}),R.value.success&&k(R.value.message||"Specification ç”ŸæˆæˆåŠŸ")}catch(e){o(e.message)}finally{$.value=!1}}}async function Qe(){const l=y();if(l){if(!g.value.name.trim()){o("è¯·è¾“å…¥ Policy åç§°");return}B.value=!0;try{M.value=await b.previewPolicy({domain:l,name:g.value.name,target:g.value.target.trim(),force:g.value.force})}catch(e){o(e.message)}finally{B.value=!1}}}async function Xe(){const l=y();if(l){if(!g.value.name.trim()){o("è¯·è¾“å…¥ Policy åç§°");return}B.value=!0;try{M.value=await b.generatePolicy({domain:l,name:g.value.name,target:g.value.target.trim(),force:g.value.force}),M.value.success&&k(M.value.message||"Policy ç”ŸæˆæˆåŠŸ")}catch(e){o(e.message)}finally{B.value=!1}}}async function Ye(){const l=y();if(l){if(!n.value.name.trim()){o("è¯·è¾“å…¥ Event åç§°");return}if(!n.value.generateEvent&&!n.value.generateHandler){o("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªç”Ÿæˆé¡¹");return}H.value=!0;try{const e=[];if(n.value.generateEvent){const a=n.value.fields.filter(s=>s.name.trim()),i=await b.previewEvent({domain:l,name:n.value.name,fields:a,topic:n.value.topic.trim(),force:n.value.eventForce});e.push(i)}if(n.value.generateHandler){const a=await b.previewEventHandler({domain:l,event_name:n.value.name,topic:(n.value.handlerTopic||n.value.topic).trim(),force:n.value.handlerForce});e.push(a)}T.value=Se(e)}catch(e){o(e.message)}finally{H.value=!1}}}async function Ze(){const l=y();if(l){if(!n.value.name.trim()){o("è¯·è¾“å…¥ Event åç§°");return}if(!n.value.generateEvent&&!n.value.generateHandler){o("è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªç”Ÿæˆé¡¹");return}H.value=!0;try{const e=[];if(n.value.generateEvent){const a=n.value.fields.filter(s=>s.name.trim()),i=await b.generateEvent({domain:l,name:n.value.name,fields:a,topic:n.value.topic.trim(),force:n.value.eventForce});e.push(i)}if(n.value.generateHandler){const a=await b.generateEventHandler({domain:l,event_name:n.value.name,topic:(n.value.handlerTopic||n.value.topic).trim(),force:n.value.handlerForce});e.push(a)}T.value=Se(e),T.value.success&&k(T.value.message||"Event ç”ŸæˆæˆåŠŸ")}catch(e){o(e.message)}finally{H.value=!1}}}return(l,e)=>(r(),u("div",ot,[e[87]||(e[87]=st('<h1 data-v-2c5c54a5>ğŸ§© é¢†åŸŸå¢å¼º DDD</h1><p class="subtitle" data-v-2c5c54a5>ä»¥ä¸­æ–‡ä¸ºä¸»ï¼Œä¸“ä¸šæœ¯è¯­ä¿ç•™è‹±æ–‡ï¼šValue Object / Specification / Policy / Event &amp; Handler</p><details class="help-tips" data-v-2c5c54a5><summary data-v-2c5c54a5>ğŸ“– ä½¿ç”¨è¯´æ˜ Usage Guide</summary><div class="tips-content" data-v-2c5c54a5><p data-v-2c5c54a5><strong data-v-2c5c54a5>é€‚ç”¨èŒƒå›´ï¼š</strong>ä»¥ä¸‹åŠŸèƒ½ä¾èµ–å·²æœ‰é¢†åŸŸæ¨¡å—ï¼Œè¯·å…ˆåœ¨ã€Œé¢†åŸŸæ¨¡å—ã€ä¸­ç”Ÿæˆã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>Value Objectï¼š</strong>é¢†åŸŸå€¼å¯¹è±¡ï¼Œç”¨äºè¡¨è¾¾ä¸å¯å˜çš„ä¸šåŠ¡æ¦‚å¿µã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>Specificationï¼š</strong>é¢†åŸŸè§„æ ¼ï¼Œç”¨äºæè¿°æ˜¯å¦æ»¡è¶³æŸä¸ªä¸šåŠ¡æ¡ä»¶ã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>Policyï¼š</strong>é¢†åŸŸç­–ç•¥ï¼Œç”¨äºçº¦æŸæˆ–åˆ¤æ–­ä¸šåŠ¡è¡Œä¸ºã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>å‘½åå»ºè®®ï¼š</strong>ä½¿ç”¨ PascalCaseï¼Œå¦‚ <code data-v-2c5c54a5>EmailAddress</code>ã€<code data-v-2c5c54a5>ActiveUserSpec</code></p><p data-v-2c5c54a5><strong data-v-2c5c54a5>Event ä¸ Handlerï¼š</strong>å¯å•ç‹¬ç”Ÿæˆï¼Œä¹Ÿå¯åœ¨åŒä¸€æ“ä½œä¸­ç»„åˆç”Ÿæˆã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>Topicï¼š</strong>ç•™ç©ºæ—¶è‡ªåŠ¨æŒ‰é¢†åŸŸç”Ÿæˆï¼Œä¾‹å¦‚ <code data-v-2c5c54a5>user.activated</code></p><p data-v-2c5c54a5><strong data-v-2c5c54a5>å›æ˜¾ä¸ç®¡ç†ï¼š</strong>å¯ä»å·²æœ‰åˆ—è¡¨åŠ è½½å·²ç”Ÿæˆç»„ä»¶ï¼Œæ”¯æŒé‡å‘½åä¸åˆ é™¤ã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>Diff å¯¹æ¯”ï¼š</strong>å¯¹æ¯”å½“å‰æ–‡ä»¶ä¸é¢„è§ˆç»“æœï¼ŒHandler å¯¹æ¯”ä»…æ˜¾ç¤ºå¤„ç†å™¨æ–‡ä»¶ã€‚</p><p data-v-2c5c54a5><strong data-v-2c5c54a5>æ‰¹é‡å¯¼å…¥ï¼š</strong>æ”¯æŒ JSON æˆ–è¡Œæ ¼å¼ï¼ˆå¦‚ <code data-v-2c5c54a5>name,type,comment</code>ï¼‰ï¼Œæšä¸¾å¯ç”¨ <code data-v-2c5c54a5>enum:a|b</code>ã€‚</p></div></details>',3)),t("div",ut,[e[39]||(e[39]=t("label",null,[N(" é€‰æ‹©é¢†åŸŸ Domain * "),t("span",{class:"tooltip","data-tooltip":"éœ€è¦å·²å­˜åœ¨çš„é¢†åŸŸæ¨¡å—"},"â“˜")],-1)),t("div",rt,[v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>U.value=a),list:"domain-list",placeholder:"user / order / product"},null,512),[[_,U.value]]),t("datalist",ct,[(r(!0),u(C,null,O(A.value,a=>(r(),u("option",{key:a,value:a},c(a),9,dt))),128))]),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>U.value=a),class:"domain-select"},[e[38]||(e[38]=t("option",{value:""},"é€‰æ‹©å·²æœ‰é¢†åŸŸ",-1)),(r(!0),u(C,null,O(A.value,a=>(r(),u("option",{key:a,value:a},c(a),9,vt))),128))],512),[[J,U.value]]),t("button",{class:"btn",onClick:pe,disabled:Z.value},c(Z.value?"åˆ·æ–°ä¸­...":"åˆ·æ–°é¢†åŸŸ"),9,ft)]),t("span",pt,c(De.value),1)]),t("div",mt,[t("section",gt,[e[47]||(e[47]=t("div",{class:"card-header"},[t("h2",null,"å€¼å¯¹è±¡ Value Object"),t("span",{class:"tag"},"Domain")],-1)),e[48]||(e[48]=t("p",{class:"card-desc"},"ç”¨äºå»ºæ¨¡ä¸å¯å˜æ¦‚å¿µï¼ˆå¦‚é‡‘é¢ã€é‚®ç®±ã€åœ°å€ï¼‰ã€‚",-1)),t("div",bt,[e[41]||(e[41]=t("label",null,"å·²æœ‰ Value Object",-1)),t("div",yt,[v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>V.value=a),class:"existing-select"},[e[40]||(e[40]=t("option",{value:""},"é€‰æ‹©...",-1)),(r(!0),u(C,null,O(L.value?.value_objects||[],a=>(r(),u("option",{key:a.name,value:a.name},c(a.name),9,ht))),128))],512),[[J,V.value]]),t("div",_t,[t("button",{class:"btn",onClick:Le,disabled:!V.value||f.value}," åŠ è½½ ",8,wt),t("button",{class:"btn",onClick:e[3]||(e[3]=a=>K("valueobject",V.value,"Value Object")),disabled:!V.value||f.value}," é‡å‘½å ",8,kt),t("button",{class:"btn danger",onClick:e[4]||(e[4]=a=>Q("valueobject",V.value,"Value Object")),disabled:!V.value||f.value}," åˆ é™¤ ",8,Vt)])])]),t("div",Et,[e[42]||(e[42]=t("label",null,"åç§° Name *",-1)),v(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>p.value.name=a),placeholder:"EmailAddress"},null,512),[[_,p.value.name]])]),t("div",St,[t("div",Dt,[e[43]||(e[43]=t("h3",null,"å­—æ®µ Fields",-1)),t("button",{class:"btn-add",onClick:e[6]||(e[6]=a=>me(p.value.fields))},"+ æ·»åŠ å­—æ®µ")]),(r(!0),u(C,null,O(p.value.fields,(a,i)=>(r(),u("div",{class:"field-row",key:i},[v(t("input",{"onUpdate:modelValue":s=>a.name=s,placeholder:"value",class:"field-name"},null,8,Ft),[[_,a.name]]),v(t("select",{"onUpdate:modelValue":s=>a.type=s,class:"field-type"},[(r(!0),u(C,null,O(se.value,s=>(r(),u("option",{key:s.type,value:s.type},c(s.type)+" - "+c(s.description),9,Ct))),128))],8,xt),[[J,a.type]]),a.type==="enum"?(r(),u("input",{key:0,value:a.enum_values?.join("|"),onInput:s=>be(a,s.target.value),placeholder:"basic|premium",class:"field-enum"},null,40,Ot)):j("",!0),v(t("input",{"onUpdate:modelValue":s=>a.comment=s,placeholder:"å­—æ®µå¤‡æ³¨",class:"field-comment"},null,8,Ut),[[_,a.comment]]),t("button",{class:"btn-remove",onClick:s=>ge(p.value.fields,i),disabled:p.value.fields.length===1},"Ã—",8,jt)]))),128))]),t("div",Ht,[t("div",{class:"batch-header"},[e[44]||(e[44]=t("div",{class:"batch-title"},"æ‰¹é‡å¯¼å…¥/å¯¼å‡ºå­—æ®µ",-1)),t("div",{class:"batch-actions"},[t("button",{class:"btn",onClick:Fe},"å¯¼å…¥"),t("button",{class:"btn",onClick:xe},"å¯¼å‡º")])]),v(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=a=>ee.value=a),placeholder:"æ”¯æŒ JSON æ•°ç»„æˆ–è¡Œæ ¼å¼ï¼šname,type,comment"},null,512),[[_,ee.value]]),e[45]||(e[45]=t("span",{class:"hint"},'ç¤ºä¾‹ï¼š{"name":"EmailAddress","fields":[{"name":"value","type":"string","comment":"é‚®ç®±"}]}',-1))]),t("label",Pt,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>p.value.force=a)},null,512),[[G,p.value.force]]),e[46]||(e[46]=N(" å¼ºåˆ¶è¦†ç›– Force ",-1))]),t("div",$t,[t("button",{class:"btn ghost",onClick:Be,disabled:P.value||h.value},c(h.value?"å¯¹æ¯”ä¸­...":"å¯¹æ¯” Diff"),9,Bt),t("button",{class:"btn",onClick:ze,disabled:P.value},c(P.value?"é¢„è§ˆä¸­...":"é¢„è§ˆ Preview"),9,Tt),t("button",{class:"btn primary",onClick:We,disabled:P.value},c(P.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,Nt)]),I.value?(r(),u("div",Jt,[t("div",At,[t("span",null,c(I.value.success?"âœ… ç”Ÿæˆç»“æœ":"âŒ ç”Ÿæˆå¤±è´¥"),1)]),t("div",Lt,[(r(!0),u(C,null,O(I.value.files,a=>(r(),u("div",{class:"file",key:a.path},[t("span",{class:ne(["file-status",a.status])},c(W(a.status)),3),t("span",It,c(a.path.split("/").pop()),1)]))),128))])])):j("",!0)]),t("section",Rt,[e[56]||(e[56]=t("div",{class:"card-header"},[t("h2",null,"è§„æ ¼ Specification"),t("span",{class:"tag"},"Domain")],-1)),e[57]||(e[57]=t("p",{class:"card-desc"},"ç”¨äºå°è£…ä¸šåŠ¡è§„åˆ™åˆ¤æ–­ï¼ˆå¯å¤ç”¨ï¼‰ã€‚",-1)),t("div",Mt,[e[50]||(e[50]=t("label",null,"å·²æœ‰ Specification",-1)),t("div",Gt,[v(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>E.value=a),class:"existing-select"},[e[49]||(e[49]=t("option",{value:""},"é€‰æ‹©...",-1)),(r(!0),u(C,null,O(L.value?.specs||[],a=>(r(),u("option",{key:a.name,value:a.name},c(a.name),9,zt))),128))],512),[[J,E.value]]),t("div",Wt,[t("button",{class:"btn",onClick:Ie,disabled:!E.value||f.value}," åŠ è½½ ",8,qt),t("button",{class:"btn",onClick:e[10]||(e[10]=a=>K("spec",E.value,"Specification")),disabled:!E.value||f.value}," é‡å‘½å ",8,Kt),t("button",{class:"btn danger",onClick:e[11]||(e[11]=a=>Q("spec",E.value,"Specification")),disabled:!E.value||f.value}," åˆ é™¤ ",8,Qt)])])]),t("div",Xt,[e[51]||(e[51]=t("label",null,"åç§° Name *",-1)),v(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>m.value.name=a),placeholder:"ActiveUserSpec"},null,512),[[_,m.value.name]])]),t("div",Yt,[e[52]||(e[52]=t("label",null,"ç›®æ ‡ç±»å‹ Targetï¼ˆå¯é€‰ï¼‰",-1)),v(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>m.value.target=a),placeholder:U.value||"User"},null,8,Zt),[[_,m.value.target]]),e[53]||(e[53]=t("span",{class:"hint"},"ç•™ç©ºè¡¨ç¤º any",-1))]),t("label",ea,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=a=>m.value.force=a)},null,512),[[G,m.value.force]]),e[54]||(e[54]=N(" å¼ºåˆ¶è¦†ç›– Force ",-1))]),t("div",ta,[t("div",{class:"batch-header"},[e[55]||(e[55]=t("div",{class:"batch-title"},"æ‰¹é‡å¯¼å…¥/å¯¼å‡ºé…ç½®",-1)),t("div",{class:"batch-actions"},[t("button",{class:"btn",onClick:Ce},"å¯¼å…¥"),t("button",{class:"btn",onClick:Oe},"å¯¼å‡º")])]),v(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=a=>te.value=a),placeholder:"JSON æˆ– Name,Target"},null,512),[[_,te.value]])]),t("div",aa,[t("button",{class:"btn ghost",onClick:Te,disabled:$.value||h.value},c(h.value?"å¯¹æ¯”ä¸­...":"å¯¹æ¯” Diff"),9,la),t("button",{class:"btn",onClick:qe,disabled:$.value},c($.value?"é¢„è§ˆä¸­...":"é¢„è§ˆ Preview"),9,na),t("button",{class:"btn primary",onClick:Ke,disabled:$.value},c($.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,sa)]),R.value?(r(),u("div",ia,[t("div",oa,[t("span",null,c(R.value.success?"âœ… ç”Ÿæˆç»“æœ":"âŒ ç”Ÿæˆå¤±è´¥"),1)]),t("div",ua,[(r(!0),u(C,null,O(R.value.files,a=>(r(),u("div",{class:"file",key:a.path},[t("span",{class:ne(["file-status",a.status])},c(W(a.status)),3),t("span",ra,c(a.path.split("/").pop()),1)]))),128))])])):j("",!0)]),t("section",ca,[e[65]||(e[65]=t("div",{class:"card-header"},[t("h2",null,"ç­–ç•¥ Policy"),t("span",{class:"tag"},"Domain")],-1)),e[66]||(e[66]=t("p",{class:"card-desc"},"ç”¨äºè¡¨è¾¾ä¸šåŠ¡ç­–ç•¥æˆ–å†³ç­–é€»è¾‘ã€‚",-1)),t("div",da,[e[59]||(e[59]=t("label",null,"å·²æœ‰ Policy",-1)),t("div",va,[v(t("select",{"onUpdate:modelValue":e[16]||(e[16]=a=>S.value=a),class:"existing-select"},[e[58]||(e[58]=t("option",{value:""},"é€‰æ‹©...",-1)),(r(!0),u(C,null,O(L.value?.policies||[],a=>(r(),u("option",{key:a.name,value:a.name},c(a.name),9,fa))),128))],512),[[J,S.value]]),t("div",pa,[t("button",{class:"btn",onClick:Re,disabled:!S.value||f.value}," åŠ è½½ ",8,ma),t("button",{class:"btn",onClick:e[17]||(e[17]=a=>K("policy",S.value,"Policy")),disabled:!S.value||f.value}," é‡å‘½å ",8,ga),t("button",{class:"btn danger",onClick:e[18]||(e[18]=a=>Q("policy",S.value,"Policy")),disabled:!S.value||f.value}," åˆ é™¤ ",8,ba)])])]),t("div",ya,[e[60]||(e[60]=t("label",null,"åç§° Name *",-1)),v(t("input",{"onUpdate:modelValue":e[19]||(e[19]=a=>g.value.name=a),placeholder:"PasswordPolicy"},null,512),[[_,g.value.name]])]),t("div",ha,[e[61]||(e[61]=t("label",null,"ç›®æ ‡ç±»å‹ Targetï¼ˆå¯é€‰ï¼‰",-1)),v(t("input",{"onUpdate:modelValue":e[20]||(e[20]=a=>g.value.target=a),placeholder:U.value||"User"},null,8,_a),[[_,g.value.target]]),e[62]||(e[62]=t("span",{class:"hint"},"ç•™ç©ºè¡¨ç¤º any",-1))]),t("label",wa,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[21]||(e[21]=a=>g.value.force=a)},null,512),[[G,g.value.force]]),e[63]||(e[63]=N(" å¼ºåˆ¶è¦†ç›– Force ",-1))]),t("div",ka,[t("div",{class:"batch-header"},[e[64]||(e[64]=t("div",{class:"batch-title"},"æ‰¹é‡å¯¼å…¥/å¯¼å‡ºé…ç½®",-1)),t("div",{class:"batch-actions"},[t("button",{class:"btn",onClick:Ue},"å¯¼å…¥"),t("button",{class:"btn",onClick:je},"å¯¼å‡º")])]),v(t("textarea",{"onUpdate:modelValue":e[22]||(e[22]=a=>ae.value=a),placeholder:"JSON æˆ– Name,Target"},null,512),[[_,ae.value]])]),t("div",Va,[t("button",{class:"btn ghost",onClick:Ne,disabled:B.value||h.value},c(h.value?"å¯¹æ¯”ä¸­...":"å¯¹æ¯” Diff"),9,Ea),t("button",{class:"btn",onClick:Qe,disabled:B.value},c(B.value?"é¢„è§ˆä¸­...":"é¢„è§ˆ Preview"),9,Sa),t("button",{class:"btn primary",onClick:Xe,disabled:B.value},c(B.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,Da)]),M.value?(r(),u("div",Fa,[t("div",xa,[t("span",null,c(M.value.success?"âœ… ç”Ÿæˆç»“æœ":"âŒ ç”Ÿæˆå¤±è´¥"),1)]),t("div",Ca,[(r(!0),u(C,null,O(M.value.files,a=>(r(),u("div",{class:"file",key:a.path},[t("span",{class:ne(["file-status",a.status])},c(W(a.status)),3),t("span",Oa,c(a.path.split("/").pop()),1)]))),128))])])):j("",!0)]),t("section",Ua,[e[83]||(e[83]=t("div",{class:"card-header"},[t("h2",null,"äº‹ä»¶ä¸å¤„ç†å™¨ Event & Handler"),t("span",{class:"tag"},"Domain")],-1)),e[84]||(e[84]=t("p",{class:"card-desc"},"æ”¯æŒäº‹ä»¶ä¸å¤„ç†å™¨ç»„åˆç”Ÿæˆï¼Œè‡ªåŠ¨æ³¨å…¥æ¨¡å—ä¸ EventBusã€‚",-1)),t("div",ja,[e[68]||(e[68]=t("label",null,"å·²æœ‰ Event",-1)),t("div",Ha,[v(t("select",{"onUpdate:modelValue":e[23]||(e[23]=a=>D.value=a),class:"existing-select"},[e[67]||(e[67]=t("option",{value:""},"é€‰æ‹©...",-1)),(r(!0),u(C,null,O(L.value?.events||[],a=>(r(),u("option",{key:a.name,value:a.name},c(a.name),9,Pa))),128))],512),[[J,D.value]]),t("div",$a,[t("button",{class:"btn",onClick:Me,disabled:!D.value||f.value}," åŠ è½½ ",8,Ba),t("button",{class:"btn",onClick:e[24]||(e[24]=a=>K("event",D.value,"Event")),disabled:!D.value||f.value}," é‡å‘½å ",8,Ta),t("button",{class:"btn danger",onClick:e[25]||(e[25]=a=>Q("event",D.value,"Event")),disabled:!D.value||f.value}," åˆ é™¤ ",8,Na)])])]),t("div",Ja,[e[70]||(e[70]=t("label",null,"å·²æœ‰ Handler",-1)),t("div",Aa,[v(t("select",{"onUpdate:modelValue":e[26]||(e[26]=a=>F.value=a),class:"existing-select"},[e[69]||(e[69]=t("option",{value:""},"é€‰æ‹©...",-1)),(r(!0),u(C,null,O(L.value?.event_handlers||[],a=>(r(),u("option",{key:a.name,value:a.name},c(a.name),9,La))),128))],512),[[J,F.value]]),t("div",Ia,[t("button",{class:"btn",onClick:Ge,disabled:!F.value||f.value}," åŠ è½½ ",8,Ra),t("button",{class:"btn",onClick:e[27]||(e[27]=a=>K("event_handler",F.value,"Handler")),disabled:!F.value||f.value}," é‡å‘½å ",8,Ma),t("button",{class:"btn danger",onClick:e[28]||(e[28]=a=>Q("event_handler",F.value,"Handler")),disabled:!F.value||f.value}," åˆ é™¤ ",8,Ga)])])]),t("div",za,[e[71]||(e[71]=t("label",null,"äº‹ä»¶åç§° Event *",-1)),v(t("input",{"onUpdate:modelValue":e[29]||(e[29]=a=>n.value.name=a),placeholder:"UserActivated"},null,512),[[_,n.value.name]])]),t("div",Wa,[e[72]||(e[72]=t("label",null,"äº‹ä»¶ Topicï¼ˆå¯é€‰ï¼‰",-1)),v(t("input",{"onUpdate:modelValue":e[30]||(e[30]=a=>n.value.topic=a),placeholder:"user.activated"},null,512),[[_,n.value.topic]]),e[73]||(e[73]=t("span",{class:"hint"},"ç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ topic",-1))]),n.value.generateEvent?(r(),u("div",qa,[t("div",Ka,[e[74]||(e[74]=t("h3",null,"äº‹ä»¶å­—æ®µ Event Fields",-1)),t("button",{class:"btn-add",onClick:e[31]||(e[31]=a=>me(n.value.fields))},"+ æ·»åŠ å­—æ®µ")]),(r(!0),u(C,null,O(n.value.fields,(a,i)=>(r(),u("div",{class:"field-row",key:i},[v(t("input",{"onUpdate:modelValue":s=>a.name=s,placeholder:"user_id",class:"field-name"},null,8,Qa),[[_,a.name]]),v(t("select",{"onUpdate:modelValue":s=>a.type=s,class:"field-type"},[(r(!0),u(C,null,O(se.value,s=>(r(),u("option",{key:s.type,value:s.type},c(s.type)+" - "+c(s.description),9,Ya))),128))],8,Xa),[[J,a.type]]),a.type==="enum"?(r(),u("input",{key:0,value:a.enum_values?.join("|"),onInput:s=>be(a,s.target.value),placeholder:"created|deleted",class:"field-enum"},null,40,Za)):j("",!0),v(t("input",{"onUpdate:modelValue":s=>a.comment=s,placeholder:"å­—æ®µå¤‡æ³¨",class:"field-comment"},null,8,el),[[_,a.comment]]),t("button",{class:"btn-remove",onClick:s=>ge(n.value.fields,i),disabled:n.value.fields.length===1},"Ã—",8,tl)]))),128))])):j("",!0),t("div",al,[t("label",ll,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[32]||(e[32]=a=>n.value.generateEvent=a)},null,512),[[G,n.value.generateEvent]]),e[75]||(e[75]=N(" ç”Ÿæˆ Event ",-1))]),t("label",nl,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[33]||(e[33]=a=>n.value.generateHandler=a)},null,512),[[G,n.value.generateHandler]]),e[76]||(e[76]=N(" ç”Ÿæˆ Handler ",-1))]),t("label",sl,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[34]||(e[34]=a=>n.value.eventForce=a)},null,512),[[G,n.value.eventForce]]),e[77]||(e[77]=N(" Event å¼ºåˆ¶è¦†ç›– ",-1))]),t("label",il,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[35]||(e[35]=a=>n.value.handlerForce=a)},null,512),[[G,n.value.handlerForce]]),e[78]||(e[78]=N(" Handler å¼ºåˆ¶è¦†ç›– ",-1))])]),n.value.generateHandler?(r(),u("div",ol,[e[79]||(e[79]=t("label",null,"å¤„ç†å™¨ Topicï¼ˆå¯é€‰ï¼‰",-1)),v(t("input",{"onUpdate:modelValue":e[36]||(e[36]=a=>n.value.handlerTopic=a),placeholder:"é»˜è®¤ä½¿ç”¨äº‹ä»¶ Topic"},null,512),[[_,n.value.handlerTopic]]),e[80]||(e[80]=t("span",{class:"hint"},"ç•™ç©ºæ—¶å¤ç”¨äº‹ä»¶ Topic",-1))])):j("",!0),t("div",ul,[t("div",{class:"batch-header"},[e[81]||(e[81]=t("div",{class:"batch-title"},"æ‰¹é‡å¯¼å…¥/å¯¼å‡º Event é…ç½®",-1)),t("div",{class:"batch-actions"},[t("button",{class:"btn",onClick:He},"å¯¼å…¥"),t("button",{class:"btn",onClick:Pe},"å¯¼å‡º")])]),v(t("textarea",{"onUpdate:modelValue":e[37]||(e[37]=a=>le.value=a),placeholder:"JSON æˆ–è¡Œæ ¼å¼ï¼šname,type,comment"},null,512),[[_,le.value]]),e[82]||(e[82]=t("span",{class:"hint"},"å¯æºå¸¦ topicã€handler_topicã€generateEvent ç­‰å­—æ®µ",-1))]),t("div",rl,[t("button",{class:"btn ghost",onClick:Je,disabled:H.value||h.value}," Event å¯¹æ¯” ",8,cl),t("button",{class:"btn ghost",onClick:Ae,disabled:H.value||h.value}," Handler å¯¹æ¯” ",8,dl),t("button",{class:"btn",onClick:Ye,disabled:H.value},c(H.value?"é¢„è§ˆä¸­...":"é¢„è§ˆ Preview"),9,vl),t("button",{class:"btn primary",onClick:Ze,disabled:H.value},c(H.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,fl)]),T.value?(r(),u("div",pl,[t("div",ml,[t("span",null,c(T.value.success?"âœ… ç”Ÿæˆç»“æœ":"âŒ ç”Ÿæˆå¤±è´¥"),1)]),t("div",gl,[(r(!0),u(C,null,O(T.value.files,a=>(r(),u("div",{class:"file",key:a.path},[t("span",{class:ne(["file-status",a.status])},c(W(a.status)),3),t("span",bl,c(a.path.split("/").pop()),1)]))),128))]),T.value.message?(r(),u("div",yl,c(T.value.message),1)):j("",!0)])):j("",!0)])]),ie.value?(r(),u("div",hl,[t("div",{class:"diff-backdrop",onClick:ye}),t("div",_l,[t("div",wl,[t("div",null,[t("div",kl,c(de.value),1),t("div",Vl,[oe.value?(r(),u("span",El,"æ–‡ä»¶ï¼š"+c(oe.value),1)):j("",!0),re.value?(r(),u("span",Sl,"çŠ¶æ€ï¼š"+c(W(re.value)),1)):j("",!0),ue.value?(r(),u("span",Dl,c(ue.value),1)):j("",!0)])]),t("button",{class:"btn",onClick:ye},"å…³é—­")]),t("div",Fl,[t("div",xl,[e[85]||(e[85]=t("h4",null,"å½“å‰æ–‡ä»¶",-1)),t("pre",null,c(ve.value||"ï¼ˆå½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼‰"),1)]),t("div",Cl,[e[86]||(e[86]=t("h4",null,"ç”Ÿæˆé¢„è§ˆ",-1)),t("pre",null,c(fe.value||"ï¼ˆæš‚æ— é¢„è§ˆå†…å®¹ï¼‰"),1)])])])])):j("",!0)]))}}),$l=it(Ol,[["__scopeId","data-v-2c5c54a5"]]);export{$l as default};
