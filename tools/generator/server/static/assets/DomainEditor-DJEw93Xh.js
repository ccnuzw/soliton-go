import{d as B,r as p,o as S,c as n,a as e,b as f,e as E,j as v,k as b,v as _,F as y,m as g,p as h,t as i,q as M,n as P,h as d}from"./index-BQ_eP7t6.js";import{a as k,_ as q}from"./_plugin-vue_export-helper-GylEkthD.js";const G={class:"editor"},I={class:"layout"},j={class:"form-panel"},A={class:"form-group"},O={class:"fields-section"},$=["onUpdate:modelValue"],z=["onUpdate:modelValue"],L=["value"],R=["value","onInput"],H=["onClick","disabled"],J={class:"options"},K={class:"form-group inline"},Q={title:"å¯ç”¨åå°†æ·»åŠ  DeletedAt å­—æ®µï¼Œåˆ é™¤æ—¶æ ‡è®°è€ŒéçœŸåˆ é™¤"},W={class:"form-group inline"},X={title:"è‡ªåŠ¨åœ¨ main.go ä¸­æ³¨å†Œæ­¤æ¨¡å—"},Y={class:"form-group inline"},Z={title:"è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶"},ee={class:"advanced"},ae={class:"form-group"},te={class:"form-group"},le={key:0,class:"error"},se={class:"actions"},oe=["disabled"],ne=["disabled"],de={key:0,class:"preview-panel"},ie={class:"preview-header"},ue={class:"file-list"},re={class:"file-path"},ve={key:0,class:"message"},ce=B({__name:"DomainEditor",setup(pe){const u=p(!1),r=p(null),c=p(""),m=p(!1),w=p([]),l=p({name:"",fields:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!0,force:!1});S(async()=>{try{const s=await k.getFieldTypes();w.value=s.types}catch(s){console.error(s)}});function U(){l.value.fields.push({name:"",type:"string",enum_values:[]})}function C(s){l.value.fields.length>1&&l.value.fields.splice(s,1)}function x(s,a){s.enum_values=a.split("|").map(t=>t.trim()).filter(Boolean)}async function D(){c.value="",u.value=!0;try{const s=l.value.fields.filter(a=>a.name.trim());r.value=await k.previewDomain({...l.value,fields:s}),m.value=!0}catch(s){c.value=s.message}finally{u.value=!1}}async function F(){c.value="",u.value=!0;try{const s=l.value.fields.filter(a=>a.name.trim());r.value=await k.generateDomain({...l.value,fields:s}),m.value=!0}catch(s){c.value=s.message}finally{u.value=!1}}function N(){l.value={name:"",fields:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!0,force:!1},r.value=null,m.value=!1}function T(s){return{new:"æ–°å»º",overwrite:"è¦†ç›–",skip:"è·³è¿‡",error:"é”™è¯¯"}[s]||s}return(s,a)=>(d(),n("div",G,[a[16]||(a[16]=e("h1",null,"ğŸ“¦ ç”Ÿæˆé¢†åŸŸæ¨¡å— Domain",-1)),e("div",I,[e("div",j,[a[15]||(a[15]=E('<details class="help-tips" data-v-b0fa25cd><summary data-v-b0fa25cd>ğŸ“– ä½¿ç”¨æŒ‡å— Usage Guide</summary><div class="tips-content" data-v-b0fa25cd><p data-v-b0fa25cd><strong data-v-b0fa25cd>é¢†åŸŸåç§°ï¼š</strong>ä½¿ç”¨ PascalCase æ ¼å¼ï¼Œå¦‚ <code data-v-b0fa25cd>User</code>ã€<code data-v-b0fa25cd>Order</code></p><p data-v-b0fa25cd><strong data-v-b0fa25cd>å­—æ®µç±»å‹ï¼š</strong></p><ul data-v-b0fa25cd><li data-v-b0fa25cd><code data-v-b0fa25cd>string</code> - å­—ç¬¦ä¸² (varchar 255)</li><li data-v-b0fa25cd><code data-v-b0fa25cd>text</code> - é•¿æ–‡æœ¬</li><li data-v-b0fa25cd><code data-v-b0fa25cd>int</code> / <code data-v-b0fa25cd>int64</code> - æ•´æ•°</li><li data-v-b0fa25cd><code data-v-b0fa25cd>time</code> - æ—¶é—´æˆ³ï¼Œ<code data-v-b0fa25cd>time?</code> - å¯é€‰æ—¶é—´</li><li data-v-b0fa25cd><code data-v-b0fa25cd>enum</code> - æšä¸¾ç±»å‹ï¼Œéœ€å¡«å†™æšä¸¾å€¼ï¼ˆç”¨ | åˆ†éš”ï¼‰</li></ul><p data-v-b0fa25cd><strong data-v-b0fa25cd>æç¤ºï¼š</strong>å‹¾é€‰&quot;è‡ªåŠ¨æ³¨å…¥åˆ° main.go&quot;å¯è‡ªåŠ¨å®Œæˆæ¨¡å—æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä»£ç </p></div></details>',1)),e("div",A,[a[7]||(a[7]=e("label",null,[b(" é¢†åŸŸåç§° Domain Name * "),e("span",{class:"tooltip",title:"å®ä½“åç§°ï¼Œå°†ç”Ÿæˆå¯¹åº”çš„ Go ç»“æ„ä½“"},"â“˜")],-1)),v(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.name=t),placeholder:"User / Order / Product"},null,512),[[_,l.value.name]])]),e("div",O,[e("div",{class:"section-header"},[a[8]||(a[8]=e("h3",null,"å­—æ®µ Fields",-1)),e("button",{class:"btn-add",onClick:U},"+ æ·»åŠ å­—æ®µ")]),(d(!0),n(y,null,g(l.value.fields,(t,V)=>(d(),n("div",{class:"field-row",key:V},[v(e("input",{"onUpdate:modelValue":o=>t.name=o,placeholder:"username / email / status",class:"field-name"},null,8,$),[[_,t.name]]),v(e("select",{"onUpdate:modelValue":o=>t.type=o,class:"field-type"},[(d(!0),n(y,null,g(w.value,o=>(d(),n("option",{key:o.type,value:o.type},i(o.type)+" - "+i(o.description),9,L))),128))],8,z),[[M,t.type]]),t.type==="enum"?(d(),n("input",{key:0,value:t.enum_values?.join("|"),onInput:o=>x(t,o.target.value),placeholder:"active|inactive|banned",class:"field-enum",title:"æšä¸¾å€¼ç”¨ | åˆ†éš”ï¼Œå¦‚ï¼šactive|inactive"},null,40,R)):f("",!0),e("button",{class:"btn-remove",onClick:o=>C(V),disabled:l.value.fields.length===1},"Ã—",8,H)]))),128))]),e("div",J,[e("div",K,[e("label",Q,[v(e("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=t=>l.value.soft_delete=t)},null,512),[[h,l.value.soft_delete]]),a[9]||(a[9]=b(" å¯ç”¨è½¯åˆ é™¤ Soft Delete ",-1))])]),e("div",W,[e("label",X,[v(e("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=t=>l.value.wire=t)},null,512),[[h,l.value.wire]]),a[10]||(a[10]=b(" è‡ªåŠ¨æ³¨å…¥åˆ° main.go ",-1))])]),e("div",Y,[e("label",Z,[v(e("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=t=>l.value.force=t)},null,512),[[h,l.value.force]]),a[11]||(a[11]=b(" å¼ºåˆ¶è¦†ç›– Force ",-1))])])]),e("details",ee,[a[14]||(a[14]=e("summary",null,"é«˜çº§é€‰é¡¹ Advanced",-1)),e("div",ae,[a[12]||(a[12]=e("label",null,"è‡ªå®šä¹‰è¡¨å Table Name",-1)),v(e("input",{"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.table_name=t),placeholder:"ï¼ˆè‡ªåŠ¨ï¼šåç§°çš„å¤æ•°å½¢å¼ï¼‰"},null,512),[[_,l.value.table_name]])]),e("div",te,[a[13]||(a[13]=e("label",null,"è‡ªå®šä¹‰è·¯ç”±å‰ç¼€ Route Base",-1)),v(e("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.route_base=t),placeholder:"ï¼ˆè‡ªåŠ¨ï¼šåç§°çš„å¤æ•°å½¢å¼ï¼‰"},null,512),[[_,l.value.route_base]])])]),c.value?(d(),n("div",le,i(c.value),1)):f("",!0),e("div",se,[e("button",{class:"btn",onClick:D,disabled:!l.value.name||u.value},i(u.value?"åŠ è½½ä¸­...":"é¢„è§ˆ Preview"),9,oe),e("button",{class:"btn primary",onClick:F,disabled:!l.value.name||u.value},i(u.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,ne)])]),m.value&&r.value?(d(),n("div",de,[e("div",ie,[e("h3",null,i(r.value.success?"âœ… å·²ç”Ÿæˆæ–‡ä»¶":"âŒ é”™è¯¯"),1),e("button",{class:"btn-close",onClick:a[6]||(a[6]=t=>m.value=!1)},"Ã—")]),e("div",ue,[(d(!0),n(y,null,g(r.value.files,t=>(d(),n("div",{class:"file",key:t.path},[e("span",{class:P(["file-status",t.status])},i(T(t.status)),3),e("span",re,i(t.path.split("/").pop()),1)]))),128))]),r.value.message?(d(),n("div",ve,i(r.value.message),1)):f("",!0),e("button",{class:"btn primary",onClick:N,style:{width:"100%","margin-top":"16px"}}," ç”Ÿæˆå¦ä¸€ä¸ª ")])):f("",!0)])]))}}),be=q(ce,[["__scopeId","data-v-b0fa25cd"]]);export{be as default};
