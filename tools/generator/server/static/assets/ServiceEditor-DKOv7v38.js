import{d as z,r as d,k as I,o as Q,u as A,c as o,a as e,b as v,n as O,t as i,l as S,v as U,F as x,f as P,j as m,e as H,p as J,i as n}from"./index-DGFpi5WF.js";import{a as g,_ as K}from"./_plugin-vue_export-helper-1WfN36Ns.js";import{s as W}from"./toast-1pdu1r3L.js";const X={class:"editor"},Y={class:"tabs"},Z={key:0,class:"services-list"},ee={class:"search-box"},te={key:0,class:"loading"},se={key:1,class:"empty"},ae={key:2,class:"empty"},le={key:3,class:"service-grid"},oe=["onClick"],ne={class:"service-header"},ie={class:"header-actions"},de={class:"badge"},ue=["onClick"],re={class:"service-methods"},ve={key:1},ce={key:0,class:"editing-banner"},me={class:"layout"},pe={class:"form-panel"},fe={class:"form-group"},he={key:0,class:"detection-result"},_e={class:"detection-header"},ge={class:"detection-icon"},ye={class:"detection-content"},be={class:"detection-message"},ke={class:"detection-details"},we={class:"detail-item"},Ce={class:"detail-item"},Se={key:0,class:"detail-item highlight"},xe={class:"methods-section"},Pe=["onUpdate:modelValue"],Te=["onClick","disabled"],$e={class:"options"},Me={class:"form-group inline"},Ve={"data-tooltip":"è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶"},Le={key:0,class:"force-warning"},Oe={key:1,class:"error"},Ue={class:"actions"},De=["disabled"],Fe=["disabled"],Ge={key:0,class:"preview-panel"},Ne={class:"preview-header"},qe={class:"file-list"},Be={class:"file-path"},Ee={key:0,class:"message"},Re=z({__name:"ServiceEditor",setup(je){const u=d(!1),r=d(null),p=d(""),y=d(!1),b=d([]),h=d("new"),T=d(!1),k=d(null),f=d(""),_=d(null),w=d(!1),$=d(!1),l=d({name:"",methods:[""],force:!1}),M=I(()=>{if(!b.value||!f.value.trim())return b.value||[];const s=f.value.toLowerCase();return b.value.filter(t=>t.name.toLowerCase().includes(s)||t.methods.some(a=>a.toLowerCase().includes(s)))});Q(async()=>{await V()});async function V(){T.value=!0;try{const s=await g.listServices();b.value=s.services}catch(s){console.error("Failed to load services:",s)}finally{T.value=!1}}async function F(s,t){if(t.stopPropagation(),!!confirm(`ç¡®å®šè¦åˆ é™¤åº”ç”¨æœåŠ¡ "${s}" å—ï¼Ÿ

è¿™å°†åˆ é™¤æœåŠ¡æ–‡ä»¶ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤ï¼`))try{await g.deleteService(s),await V()}catch(a){alert(`åˆ é™¤å¤±è´¥: ${a.message}`)}}async function G(){if(!l.value.name||l.value.name.trim()===""){w.value=!1;return}try{const s=await g.detectServiceType(l.value.name);_.value=s,w.value=!0}catch(s){console.error("æ£€æµ‹å¤±è´¥:",s),w.value=!1}}let L=null;A(()=>l.value.name,()=>{L&&clearTimeout(L),L=setTimeout(G,500)});async function N(s){u.value=!0,p.value="";try{const t=await g.getServiceDetail(s);l.value={name:t.name,methods:t.methods.map(a=>a.name),force:!0},k.value=s,h.value="new"}catch(t){p.value=`åŠ è½½å¤±è´¥: ${t.message}`}finally{u.value=!1}}function q(){l.value.methods.push("")}function B(s){l.value.methods.length>1&&l.value.methods.splice(s,1)}async function E(){p.value="",u.value=!0;try{const s=l.value.methods.filter(t=>t.trim());r.value=await g.previewService({...l.value,methods:s}),y.value=!0}catch(s){p.value=s.message}finally{u.value=!1}}async function R(){p.value="",u.value=!0;try{const s=l.value.methods.filter(t=>t.trim());r.value=await g.generateService({...l.value,methods:s}),y.value=!0,await V(),r.value.success&&W(r.value.message||"ç”ŸæˆæˆåŠŸï¼")}catch(s){p.value=s.message}finally{u.value=!1}}function D(){l.value={name:"",methods:[""],force:!1},r.value=null,y.value=!1,k.value=null}function j(s){return{new:"æ–°å»º",overwrite:"è¦†ç›–",skip:"è·³è¿‡",error:"é”™è¯¯"}[s]||s}return(s,t)=>(n(),o("div",X,[t[22]||(t[22]=e("h1",null,"âš™ï¸ ç”Ÿæˆåº”ç”¨æœåŠ¡ Service",-1)),e("div",Y,[e("button",{class:O(["tab",{active:h.value==="new"}]),onClick:t[0]||(t[0]=a=>h.value="new")}," âœ¨ æ–°å»ºæœåŠ¡ ",2),e("button",{class:O(["tab",{active:h.value==="existing"}]),onClick:t[1]||(t[1]=a=>h.value="existing")}," ğŸ“‹ å·²ç”ŸæˆæœåŠ¡ ("+i(b.value?.length||0)+") ",3)]),h.value==="existing"?(n(),o("div",Z,[e("div",ee,[S(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),type:"text",placeholder:"ğŸ” æœç´¢åº”ç”¨æœåŠ¡æˆ–æ–¹æ³•...",class:"search-input"},null,512),[[U,f.value]]),f.value?(n(),o("span",{key:0,class:"search-clear",onClick:t[3]||(t[3]=a=>f.value="")},"âœ•")):v("",!0)]),T.value?(n(),o("div",te,"åŠ è½½ä¸­...")):M.value.length===0&&!f.value?(n(),o("div",se,[...t[8]||(t[8]=[e("p",null,"æš‚æ— å·²ç”Ÿæˆçš„åº”ç”¨æœåŠ¡",-1),e("p",{class:"hint"},'ç‚¹å‡»"æ–°å»ºæœåŠ¡"å¼€å§‹åˆ›å»º',-1)])])):M.value.length===0&&f.value?(n(),o("div",ae,[...t[9]||(t[9]=[e("p",null,"æœªæ‰¾åˆ°åŒ¹é…çš„æœåŠ¡",-1),e("p",{class:"hint"},"å°è¯•å…¶ä»–å…³é”®è¯",-1)])])):(n(),o("div",le,[(n(!0),o(x,null,P(M.value,a=>(n(),o("div",{key:a.name,class:"service-card",onClick:c=>N(a.name)},[e("div",ne,[e("h3",null,i(a.name),1),e("div",ie,[e("span",de,i(a.methods?.length||0)+" æ–¹æ³•",1),e("button",{class:"btn-delete",onClick:c=>F(a.name,c),title:"åˆ é™¤æœåŠ¡"}," ğŸ—‘ï¸ ",8,ue)])]),e("div",re,[(n(!0),o(x,null,P(a.methods,(c,C)=>(n(),o("span",{key:C,class:"method-tag"},i(c),1))),128))]),t[10]||(t[10]=e("div",{class:"service-action"}," ç‚¹å‡»ç¼–è¾‘ â†’ ",-1))],8,oe))),128))]))])):v("",!0),h.value==="new"?(n(),o("div",ve,[k.value?(n(),o("div",ce,[t[11]||(t[11]=m(" âœï¸ æ­£åœ¨ç¼–è¾‘: ",-1)),e("strong",null,i(k.value),1),e("button",{class:"btn-small",onClick:D},"å–æ¶ˆç¼–è¾‘")])):v("",!0),e("div",me,[e("div",pe,[t[20]||(t[20]=H('<details class="help-tips" data-v-2842745f><summary data-v-2842745f>ğŸ“– ä½¿ç”¨æŒ‡å— Usage Guide</summary><div class="tips-content" data-v-2842745f><p data-v-2842745f><strong data-v-2842745f>æœåŠ¡åç§°ï¼š</strong>ä½¿ç”¨ PascalCase æ ¼å¼ï¼Œå¦‚ <code data-v-2842745f>OrderService</code>ã€<code data-v-2842745f>PaymentService</code></p><p data-v-2842745f><strong data-v-2842745f>æ–¹æ³•å®šä¹‰ï¼š</strong>æ¯è¡Œä¸€ä¸ªæ–¹æ³•åï¼Œå¦‚ <code data-v-2842745f>CreateOrder</code>ã€<code data-v-2842745f>ProcessPayment</code></p><p data-v-2842745f><strong data-v-2842745f>é»˜è®¤æ–¹æ³•ï¼š</strong>å¦‚æœä¸å¡«å†™æ–¹æ³•ï¼Œå°†è‡ªåŠ¨ç”Ÿæˆ Createã€Getã€List ä¸‰ä¸ªåŸºç¡€æ–¹æ³•</p><p data-v-2842745f><strong data-v-2842745f>æ³¨æ„ï¼š</strong></p><ul data-v-2842745f><li data-v-2842745f>Service ç”¨äºç¼–æ’è·¨é¢†åŸŸçš„ä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥è°ƒç”¨å¤šä¸ª Repository</li><li data-v-2842745f>ç”Ÿæˆåä¼šè‡ªåŠ¨è¿è¡Œ go mod tidy ä¸‹è½½ä¾èµ–</li><li data-v-2842745f>å‹¾é€‰&quot;è‡ªåŠ¨æ³¨å…¥åˆ° main.go&quot;å¯è‡ªåŠ¨å®Œæˆæ¨¡å—æ³¨å†Œ</li></ul></div></details>',1)),e("div",fe,[t[12]||(t[12]=e("label",null,[m(" æœåŠ¡åç§° Service Name * "),e("span",{class:"tooltip","data-tooltip":"åº”ç”¨æœåŠ¡åç§°ï¼Œç”¨äºè·¨é¢†åŸŸä¸šåŠ¡é€»è¾‘"},"â“˜")],-1)),S(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.name=a),placeholder:"OrderService / PaymentService"},null,512),[[U,l.value.name]]),t[13]||(t[13]=e("span",{class:"hint"},'å¦‚æœæœªåŒ…å« "Service" åç¼€ä¼šè‡ªåŠ¨æ·»åŠ ',-1))]),w.value&&_.value?(n(),o("div",he,[e("div",_e,[e("div",ge,i(_.value.domain_exists?"âœ…":"â„¹ï¸"),1),e("div",ye,[e("p",be,i(_.value.message),1),e("div",ke,[e("span",we,[t[14]||(t[14]=e("strong",null,"ç±»å‹:",-1)),m(" "+i(_.value.service_type==="domain_service"?"é¢†åŸŸæœåŠ¡":"è·¨é¢†åŸŸæœåŠ¡"),1)]),e("span",Ce,[t[15]||(t[15]=e("strong",null,"ç›®æ ‡:",-1)),m(" "+i(_.value.target_dir),1)]),_.value.should_reuse_dto?(n(),o("span",Se," âœ… å¤ç”¨ç°æœ‰ DTO ")):v("",!0)])]),e("button",{class:"btn-toggle-manual",onClick:t[5]||(t[5]=a=>$.value=!$.value),type:"button"},i($.value?"ğŸ”„ è‡ªåŠ¨":"âš™ï¸ æ‰‹åŠ¨"),1)])])):v("",!0),e("div",xe,[e("div",{class:"section-header"},[t[16]||(t[16]=e("h3",null,"æ–¹æ³• Methods",-1)),e("button",{class:"btn-add",onClick:q},"+ æ·»åŠ æ–¹æ³•")]),(n(!0),o(x,null,P(l.value.methods,(a,c)=>(n(),o("div",{class:"method-row",key:c},[S(e("input",{"onUpdate:modelValue":C=>l.value.methods[c]=C,placeholder:"CreateOrder / ProcessPayment / CancelOrder",class:"method-name"},null,8,Pe),[[U,l.value.methods[c]]]),e("button",{class:"btn-remove",onClick:C=>B(c),disabled:l.value.methods.length===1},"Ã—",8,Te)]))),128)),t[17]||(t[17]=e("p",{class:"hint"},"ç•™ç©ºå°†ç”Ÿæˆé»˜è®¤æ–¹æ³•ï¼šCreateã€Getã€List",-1))]),e("div",$e,[e("div",Me,[e("label",Ve,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.force=a)},null,512),[[J,l.value.force]]),t[18]||(t[18]=m(" å¼ºåˆ¶è¦†ç›– Force ",-1))]),l.value.force?(n(),o("div",Le,[...t[19]||(t[19]=[m(" âš ï¸ ",-1),e("strong",null,"è­¦å‘Šï¼š",-1),m("å¼ºåˆ¶è¦†ç›–å°†",-1),e("strong",null,"æ°¸ä¹…åˆ é™¤",-1),m("æ‰€æœ‰æ‰‹åŠ¨ä¿®æ”¹çš„ä»£ç ï¼",-1),e("br",null,null,-1),m(" åªåœ¨é¦–æ¬¡ç”Ÿæˆåç«‹å³ä¿®æ”¹æ—¶ä½¿ç”¨ã€‚ä¸€æ—¦å¼€å§‹å†™ä¸šåŠ¡é€»è¾‘ï¼Œè¯·å‹¿å‹¾é€‰æ­¤é€‰é¡¹ã€‚ ",-1)])])):v("",!0)])]),p.value?(n(),o("div",Oe,i(p.value),1)):v("",!0),e("div",Ue,[e("button",{class:"btn",onClick:E,disabled:!l.value.name||u.value},i(u.value?"åŠ è½½ä¸­...":"é¢„è§ˆ Preview"),9,De),e("button",{class:"btn primary",onClick:R,disabled:!l.value.name||u.value},i(u.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,Fe)])]),y.value&&r.value?(n(),o("div",Ge,[e("div",Ne,[e("h3",null,i(r.value.success?"âœ… å·²ç”Ÿæˆæ–‡ä»¶":"âŒ é”™è¯¯"),1),e("button",{class:"btn-close",onClick:t[7]||(t[7]=a=>y.value=!1)},"Ã—")]),e("div",qe,[(n(!0),o(x,null,P(r.value.files,a=>(n(),o("div",{class:"file",key:a.path},[e("span",{class:O(["file-status",a.status])},i(j(a.status)),3),e("span",Be,i(a.path.split("/").pop()),1)]))),128))]),r.value.message?(n(),o("div",Ee,i(r.value.message),1)):v("",!0),t[21]||(t[21]=e("div",{class:"next-steps"},[e("h4",null,"ä¸‹ä¸€æ­¥ Next Steps:"),e("ol",null,[e("li",null,"åœ¨æœåŠ¡ç»“æ„ä½“ä¸­æ³¨å…¥æ‰€éœ€çš„ Repository"),e("li",null,"åœ¨æ¯ä¸ªæ–¹æ³•ä¸­å®ç°ä¸šåŠ¡é€»è¾‘"),e("li",null,"åœ¨ main.go ä¸­æ³¨å†ŒæœåŠ¡")])],-1)),e("button",{class:"btn primary",onClick:D,style:{width:"100%","margin-top":"16px"}}," ç”Ÿæˆå¦ä¸€ä¸ª ")])):v("",!0)])])):v("",!0)]))}}),Ae=K(Re,[["__scopeId","data-v-2842745f"]]);export{Ae as default};
