import{d as B,r as c,o as S,c as n,a as e,b,e as E,j as v,k as f,v as _,F as y,m as g,p as h,t as d,q as M,n as P,h as i}from"./index-dux9knJ4.js";import{a as k,_ as q}from"./_plugin-vue_export-helper-GylEkthD.js";const G={class:"editor"},I={class:"layout"},j={class:"form-panel"},A={class:"form-group"},O={class:"fields-section"},$=["onUpdate:modelValue"],z=["onUpdate:modelValue"],L=["value"],R=["value","onInput"],H=["onClick","disabled"],J={class:"options"},K={class:"form-group inline"},Q={"data-tooltip":"å¯ç”¨åå°†æ·»åŠ  DeletedAt å­—æ®µï¼Œåˆ é™¤æ—¶æ ‡è®°è€ŒéçœŸåˆ é™¤"},W={class:"form-group inline"},X={"data-tooltip":"è‡ªåŠ¨åœ¨ main.go ä¸­æ³¨å†Œæ­¤æ¨¡å—"},Y={class:"form-group inline"},Z={"data-tooltip":"è¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶"},ee={class:"advanced"},te={class:"form-group"},ae={class:"form-group"},le={key:0,class:"error"},se={class:"actions"},oe=["disabled"],ne=["disabled"],ie={key:0,class:"preview-panel"},de={class:"preview-header"},ue={class:"file-list"},re={class:"file-path"},ve={key:0,class:"message"},pe=B({__name:"DomainEditor",setup(ce){const u=c(!1),r=c(null),p=c(""),m=c(!1),w=c([]),l=c({name:"",fields:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!0,force:!1});S(async()=>{try{const s=await k.getFieldTypes();w.value=s.types}catch(s){console.error(s)}});function U(){l.value.fields.push({name:"",type:"string",enum_values:[]})}function C(s){l.value.fields.length>1&&l.value.fields.splice(s,1)}function x(s,t){s.enum_values=t.split("|").map(a=>a.trim()).filter(Boolean)}async function D(){p.value="",u.value=!0;try{const s=l.value.fields.filter(t=>t.name.trim());r.value=await k.previewDomain({...l.value,fields:s}),m.value=!0}catch(s){p.value=s.message}finally{u.value=!1}}async function F(){p.value="",u.value=!0;try{const s=l.value.fields.filter(t=>t.name.trim());r.value=await k.generateDomain({...l.value,fields:s}),m.value=!0}catch(s){p.value=s.message}finally{u.value=!1}}function N(){l.value={name:"",fields:[{name:"",type:"string",enum_values:[]}],table_name:"",route_base:"",soft_delete:!1,wire:!0,force:!1},r.value=null,m.value=!1}function T(s){return{new:"æ–°å»º",overwrite:"è¦†ç›–",skip:"è·³è¿‡",error:"é”™è¯¯"}[s]||s}return(s,t)=>(i(),n("div",G,[t[16]||(t[16]=e("h1",null,"ğŸ“¦ ç”Ÿæˆé¢†åŸŸæ¨¡å— Domain",-1)),e("div",I,[e("div",j,[t[15]||(t[15]=E('<details class="help-tips" data-v-b4f9b312><summary data-v-b4f9b312>ğŸ“– ä½¿ç”¨æŒ‡å— Usage Guide</summary><div class="tips-content" data-v-b4f9b312><p data-v-b4f9b312><strong data-v-b4f9b312>é¢†åŸŸåç§°ï¼š</strong>ä½¿ç”¨ PascalCase æ ¼å¼ï¼Œå¦‚ <code data-v-b4f9b312>User</code>ã€<code data-v-b4f9b312>Order</code></p><p data-v-b4f9b312><strong data-v-b4f9b312>å­—æ®µç±»å‹ï¼š</strong></p><ul data-v-b4f9b312><li data-v-b4f9b312><code data-v-b4f9b312>string</code> - å­—ç¬¦ä¸² (varchar 255)</li><li data-v-b4f9b312><code data-v-b4f9b312>text</code> - é•¿æ–‡æœ¬</li><li data-v-b4f9b312><code data-v-b4f9b312>int</code> / <code data-v-b4f9b312>int64</code> - æ•´æ•°</li><li data-v-b4f9b312><code data-v-b4f9b312>time</code> - æ—¶é—´æˆ³ï¼Œ<code data-v-b4f9b312>time?</code> - å¯é€‰æ—¶é—´</li><li data-v-b4f9b312><code data-v-b4f9b312>enum</code> - æšä¸¾ç±»å‹ï¼Œéœ€å¡«å†™æšä¸¾å€¼ï¼ˆç”¨ | åˆ†éš”ï¼‰</li></ul><p data-v-b4f9b312><strong data-v-b4f9b312>æç¤ºï¼š</strong>å‹¾é€‰&quot;è‡ªåŠ¨æ³¨å…¥åˆ° main.go&quot;å¯è‡ªåŠ¨å®Œæˆæ¨¡å—æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ä»£ç </p></div></details>',1)),e("div",A,[t[7]||(t[7]=e("label",null,[f(" é¢†åŸŸåç§° Domain Name * "),e("span",{class:"tooltip","data-tooltip":"å®ä½“åç§°ï¼Œå°†ç”Ÿæˆå¯¹åº”çš„ Go ç»“æ„ä½“"},"â“˜")],-1)),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>l.value.name=a),placeholder:"User / Order / Product"},null,512),[[_,l.value.name]])]),e("div",O,[e("div",{class:"section-header"},[t[8]||(t[8]=e("h3",null,"å­—æ®µ Fields",-1)),e("button",{class:"btn-add",onClick:U},"+ æ·»åŠ å­—æ®µ")]),(i(!0),n(y,null,g(l.value.fields,(a,V)=>(i(),n("div",{class:"field-row",key:V},[v(e("input",{"onUpdate:modelValue":o=>a.name=o,placeholder:"username / email / status",class:"field-name"},null,8,$),[[_,a.name]]),v(e("select",{"onUpdate:modelValue":o=>a.type=o,class:"field-type"},[(i(!0),n(y,null,g(w.value,o=>(i(),n("option",{key:o.type,value:o.type},d(o.type)+" - "+d(o.description),9,L))),128))],8,z),[[M,a.type]]),a.type==="enum"?(i(),n("input",{key:0,value:a.enum_values?.join("|"),onInput:o=>x(a,o.target.value),placeholder:"active|inactive|banned",class:"field-enum","data-tooltip":"æšä¸¾å€¼ç”¨ | åˆ†éš”ï¼Œå¦‚ï¼šactive|inactive"},null,40,R)):b("",!0),e("button",{class:"btn-remove",onClick:o=>C(V),disabled:l.value.fields.length===1},"Ã—",8,H)]))),128))]),e("div",J,[e("div",K,[e("label",Q,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>l.value.soft_delete=a)},null,512),[[h,l.value.soft_delete]]),t[9]||(t[9]=f(" å¯ç”¨è½¯åˆ é™¤ Soft Delete ",-1))])]),e("div",W,[e("label",X,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.wire=a)},null,512),[[h,l.value.wire]]),t[10]||(t[10]=f(" è‡ªåŠ¨æ³¨å…¥åˆ° main.go ",-1))])]),e("div",Y,[e("label",Z,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=a=>l.value.force=a)},null,512),[[h,l.value.force]]),t[11]||(t[11]=f(" å¼ºåˆ¶è¦†ç›– Force ",-1))])])]),e("details",ee,[t[14]||(t[14]=e("summary",null,"é«˜çº§é€‰é¡¹ Advanced",-1)),e("div",te,[t[12]||(t[12]=e("label",null,"è‡ªå®šä¹‰è¡¨å Table Name",-1)),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>l.value.table_name=a),placeholder:"ï¼ˆè‡ªåŠ¨ï¼šåç§°çš„å¤æ•°å½¢å¼ï¼‰"},null,512),[[_,l.value.table_name]])]),e("div",ae,[t[13]||(t[13]=e("label",null,"è‡ªå®šä¹‰è·¯ç”±å‰ç¼€ Route Base",-1)),v(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.route_base=a),placeholder:"ï¼ˆè‡ªåŠ¨ï¼šåç§°çš„å¤æ•°å½¢å¼ï¼‰"},null,512),[[_,l.value.route_base]])])]),p.value?(i(),n("div",le,d(p.value),1)):b("",!0),e("div",se,[e("button",{class:"btn",onClick:D,disabled:!l.value.name||u.value},d(u.value?"åŠ è½½ä¸­...":"é¢„è§ˆ Preview"),9,oe),e("button",{class:"btn primary",onClick:F,disabled:!l.value.name||u.value},d(u.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆ Generate"),9,ne)])]),m.value&&r.value?(i(),n("div",ie,[e("div",de,[e("h3",null,d(r.value.success?"âœ… å·²ç”Ÿæˆæ–‡ä»¶":"âŒ é”™è¯¯"),1),e("button",{class:"btn-close",onClick:t[6]||(t[6]=a=>m.value=!1)},"Ã—")]),e("div",ue,[(i(!0),n(y,null,g(r.value.files,a=>(i(),n("div",{class:"file",key:a.path},[e("span",{class:P(["file-status",a.status])},d(T(a.status)),3),e("span",re,d(a.path.split("/").pop()),1)]))),128))]),r.value.message?(i(),n("div",ve,d(r.value.message),1)):b("",!0),e("button",{class:"btn primary",onClick:N,style:{width:"100%","margin-top":"16px"}}," ç”Ÿæˆå¦ä¸€ä¸ª ")])):b("",!0)])]))}}),fe=q(pe,[["__scopeId","data-v-b4f9b312"]]);export{fe as default};
