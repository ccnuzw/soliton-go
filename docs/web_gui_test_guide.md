# Soliton-Gen Web GUI 功能测试指南

## 启动 GUI

```bash
cd /Users/mac/Progame/soliton-go/tools/generator
./soliton-gen serve
# 访问 http://127.0.0.1:3000
```

---

## 测试用例

### 1. Dashboard 首页

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 项目检测 | 打开首页 | 显示"已检测到项目"或"未找到项目" |
| 使用指南 | 点击展开 | 显示快速开始、新功能、提示 |
| 切换项目 | 点击 ⇄ 按钮 | 显示可切换的项目列表 |
| 更新依赖 | 点击卡片 | 显示"正在更新..."然后"成功" |
| 新入口 | 卡片/侧边栏 | 显示“领域增强”“迁移中心”入口 |

---

### 2. 初始化项目

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 项目名称 | 输入 `testapp` | 自动生成模块路径 |
| 预览 | 点击预览 | 显示将生成的文件列表 |
| 生成 | 点击生成 | 创建完整项目结构 |
| go mod tidy | 自动执行 | 显示进度和结果 |
| 切换项目 | 点击按钮 | 跳转到领域编辑器 |

---

### 3. 领域模型生成

#### 测试数据（简化版）

**领域名称：** `Article`

**字段列表：**

| 字段名 | 类型 | 备注 | 枚举值 |
|--------|------|------|--------|
| title | string | 文章标题 | - |
| content | text | 正文内容 | - |
| author | string | 作者名称 | - |
| views | int | 浏览次数 | - |
| status | enum | 文章状态 | draft\|published\|archived |
| published_at | time? | 发布时间 | - |
| is_featured | bool | 是否精选 | - |

#### 功能测试

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 添加字段 | 点击"+ 添加字段" | 新增一行空字段 |
| 上移字段 | 点击 ↑ | 字段向上移动一位 |
| 下移字段 | 点击 ↓ | 字段向下移动一位 |
| 删除字段 | 点击 × | 移除该字段 |
| 🆕 字段备注 | 在"备注"输入框填写 | 输入框显示输入的备注 |
| 枚举输入 | 选择 enum 类型 | 显示枚举值输入框 |
| 预览 | 点击预览 | 显示将生成的文件 |
| 生成 | 点击生成 | 创建所有文件，字段备注生成为行尾注释 |
| 编辑现有 | 点击已有领域卡片 | 加载字段和备注到编辑器 |
| 强制覆盖 | 勾选后生成 | 显示警告，文件状态为 OVERWRITE |
| 自动 tidy | 生成后 | 显示依赖更新结果 |

---

### 4. 删除领域模型

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 点击删除 | 点击卡片上 🗑️ | 弹出确认对话框 |
| 取消 | 点击"取消" | 关闭对话框，无操作 |
| 确认删除 | 点击"确认删除" | 删除所有相关文件，显示成功提示 |

**验证删除完整性：**
```bash
# 应该没有残留文件
find internal -name "*article*" 2>/dev/null
```

---

### 5. 服务生成

**服务名称：** `PaymentService`

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 自动检测 | 输入服务名 | 检测关联领域 |
| 自定义方法 | 输入 `ProcessPayment` | 添加到方法列表 |
| 生成 | 点击生成 | 创建服务文件 |

---

### 6. DDD 领域增强

#### 测试数据

**领域：** `Article`（需先生成）

**Value Object：** `Slug`
**字段：** `value:string`

**Specification：** `PublishedSpec`（Target 留空）

**Policy：** `PublishPolicy`（Target 留空）

**Event：** `ArticlePublished`  
**字段：** `article_id:uuid`

#### 功能测试

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 选择领域 | 选择 `Article` | 域提示显示可用 |
| 生成 Value Object | 填写并生成 | 生成 value_object_slug.go |
| 生成 Specification | 填写并生成 | 生成 spec_published_spec.go |
| 生成 Policy | 填写并生成 | 生成 policy_publish_policy.go |
| 组合生成 | 勾选 Event + Handler | 同时生成事件与处理器文件 |
| 自定义 Topic | 填写 topic | 事件/处理器订阅使用该 topic |
| 预览 | 点击预览 | 展示将生成的文件列表 |

---

### 7. 迁移中心

| 测试项 | 操作 | 预期结果 |
|-------|------|---------|
| 项目检测 | 打开迁移中心 | 显示项目路径与命令提示 |
| 自动 tidy | 勾选后执行 | 日志出现 TIDY 步骤 |
| 执行迁移 | 点击开始迁移 | 返回完整日志与结果状态 |
| 日志筛选 | 切换筛选 | 列表实时过滤 |
| 日志复制 | 点击复制 | 复制日志到剪贴板 |
| 日志下载 | 点击下载 | 下载日志文件 |
| 历史记录 | 重新进入 | 可查看历史运行记录 |

---

## 验证清单

- [ ] Dashboard 显示正常
- [ ] 更新依赖功能正常
- [ ] 项目初始化完整
- [ ] 字段上下移动正常
- [ ] 🆕 字段备注输入和显示正常
- [ ] 枚举类型输入正常
- [ ] 🆕 编辑现有领域加载备注正常
- [ ] 领域生成成功
- [ ] 🆕 生成代码包含行尾注释（备注）
- [ ] 强制覆盖警告显示
- [ ] 删除确认对话框美观
- [ ] 删除后清理完整
- [ ] go mod tidy 自动执行
- [ ] DDD 领域增强生成正常
- [ ] 迁移中心日志与历史记录正常
- [ ] 编译通过

---

## 编译验证

```bash
cd /path/to/project
GOWORK=off go build ./...
```
